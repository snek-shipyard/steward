(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{118:function(e){e.exports=JSON.parse('{"ohrwurm":[{"url":"https://ohrwurm.snek.at/graphql","title":"ohrwurm.snek.at","options":[]},{"url":"https://ohrwurm.snek.at/graphql","title":"ohrwurm.snek.at 2","options":[]}]}')},294:function(e,t,n){},480:function(e,t,n){},481:function(e,t,n){},482:function(e,t,n){},501:function(e,t,n){},502:function(e,t,n){},503:function(e,t,n){},504:function(e,t,n){},505:function(e,t,n){},506:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),s=n.n(a),c=n(18),i=n.n(c),o=n(37),l=n(29),u=n(67),d=n(234),p=n(114),m=n(235),h=n(236),j=(n(291),n(292),n(293),n(118)),b=(n(294),n(36)),O=n(10),v=n.n(O),f=n(15),g=n(19),x=n(20),k=n(22),w=n(21),S=n(6),C=n(39),R=n(158),E=n(83),y=n(31),M=n.n(y);function A(){var e=Object(C.a)(["\n          mutation changePassword($token: String!, $newPassword: String!) {\n            changePassword(token: $token, newPassword: $newPassword) {\n              success\n            }\n          }\n        "]);return A=function(){return e},e}function T(){var e=Object(C.a)(["\n              query whoami($token: String!) {\n                me(token: $token) {\n                  passwordChanged\n                  isOhrwurmSupervisor\n                }\n              }\n            "]);return T=function(){return e},e}var U=function(e){return function(){var t=Object(f.a)(v.a.mark((function t(n,r,a){var s,c,i,o,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.getClientSnek,n({type:"USER_LOGIN_REQUEST"}),t.prev=2,(null===e||void 0===e?void 0:e.password)&&(e.password=Object(R.sha256)(e.password)),t.next=6,s().session.begin(e);case 6:if((null===(c=t.sent)||void 0===c?void 0:c.anonymous)||"SNEKUser"!==(null===c||void 0===c?void 0:c.__typename)){t.next=16;break}return t.next=10,s().session.runner("query",M()(T()),{}).then((function(e){var t=e.data,n=e.errors;if(!t||n)throw Error("Login failed");return t.me}));case 10:i=t.sent,o=i.passwordChanged,l=i.isOhrwurmSupervisor,n({type:"USER_LOGIN_SUCCESS",payload:{username:c.username,passwordChanged:o,isOhrwurmSupervisor:l,anonymous:!1}}),t.next=21;break;case 16:if(!c.anonymous){t.next=20;break}n({type:"USER_LOGIN_SUCCESS",payload:{anonymous:!0}}),t.next=21;break;case 20:throw Error("Login failed");case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(2),n({type:"USER_LOGIN_FAILURE",payload:{error:{message:"Login failed"},errorDetails:Object(E.serializeError)(t.t0)}});case 26:case"end":return t.stop()}}),t,null,[[2,23]])})));return function(e,n,r){return t.apply(this,arguments)}}()},D=(n(480),function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isOpen:!1},e.toggleCollapse=function(){e.setState({isOpen:!e.state.isOpen})},e}return Object(x.a)(n,[{key:"logout",value:function(){var e=Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.logout();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(r.jsxs)(S.A,{color:"default-color",dark:!0,expand:"md",children:[Object(r.jsx)(S.B,{children:Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAMDWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTEyLTIzVDIwOjA0OjM0KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTAxLTE2VDE3OjU1OjIwKzAxOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wMS0xNlQxNzo1NToyMCswMTowMCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0ZTgxNDQyZC05Yzc4LTgyNDctOGI0NC05NzI2ZmUzNDM0YmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo5ZmVmZjUxMS0zZDI5LTRkNDYtODdhMi0zNGE2Y2UwZDEwMDIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmNmQ5ZTUwZS1lODMwLTkzNGYtYWExYS01OWE2OTQzNDQ1NTciIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMjAwMCIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwMDAiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT54bXAuZGlkOmRiN2M0ODg2LTM5ZGUtYjQ0OS04ZTExLTk4MDU1ZDcwODEyZjwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmY2ZDllNTBlLWU4MzAtOTM0Zi1hYTFhLTU5YTY5NDM0NDU1NyIgc3RFdnQ6d2hlbj0iMjAxOS0xMi0yM1QyMDowNDozNCswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYzRiMGZmZS1hNjk5LWZjNGMtOTZiNC1iMjZhNmYxYzJkYjgiIHN0RXZ0OndoZW49IjIwMjAtMDEtMDRUMDA6NTI6NDUrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MWZmZjhiZTYtYWEzOC03NTRmLWFlODktOTdlMDhjODc3NjY5IiBzdEV2dDp3aGVuPSIyMDIwLTAxLTExVDIwOjQwOjU1KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjNlMWY1NWNiLTQ0MTQtMTI0ZC04YTk2LWUwZjY2MzY4MDdmYiIgc3RFdnQ6d2hlbj0iMjAyMC0wMS0xMVQyMDo0MDo1NSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ZTgxNDQyZC05Yzc4LTgyNDctOGI0NC05NzI2ZmUzNDM0YmQiIHN0RXZ0OndoZW49IjIwMjAtMDEtMTZUMTc6NTU6MjArMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MWZmZjhiZTYtYWEzOC03NTRmLWFlODktOTdlMDhjODc3NjY5IiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6OGQzYTMzNmQtMTI1Yy1jMzQwLTk5ZmQtOWQ0ODViZmRiMDJjIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjZkOWU1MGUtZTgzMC05MzRmLWFhMWEtNTlhNjk0MzQ0NTU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+B8AAMwAABiFJREFUWMPtmGtsFFUUxw9QoLRl+6CU2rIzs7M7A2kCUkQUaQ1ISI3GCtqGh8EElKdGQ6AULAJtKYUW8EVEP6CQGDURNaBAtIIJ+EglCAjykvfDGFExokbjo/7PzN16e53dLruFaOKHX3Y3u3PPf88595xzL7W0tNC/GfpPCNQCVrykgxFgOqgBT4InwCIwGdwEusezdqICR4FnwSHQEoXfwW5QDwZfC4H3g73tiIpGExh9NQQWgo8TEKbyKsjqKIEPX4Hh38BP4I8YfvsNGJmowFXtGLkA1oLxYBDIBZkgD9wAJoF14GKUNSbEK3B1lEWPi13atc0zpkX5fS26Lteivpr7WXyXAmaAcxHWG3OlAmdFEdcIOsm/14MQ5LfI19WmPr0tMkIW9fLZlJVqkw6R+t9CueQ8E2HdfrEK7B9F3Pg2wkzXS+ndbcpIsal4XJBmvWzQ3G06PfC8QQOGhyiFIDrHFa1UA3Xts7EKPBxBXGlYFIevT7bteIwFDCgK0bQXDVrxhUZ1BzVa3KzR8mMa1ezTqLTCpOx02/kT7Gkp7Pd42KhuT+CECOIqeXG/7nqLw2cNDFHhqBCNXRCg2v0a1R/RqPI9neY16d35teIdnRZ+oNPK0xo9slGnfoUhSutkk2a0CXmFh62MaALPejywl8PDXkjrbNOwMUHHW/O3666wwxo9ttMVxMJAATgL1lc2QfC7Oi3Db5Z+ptHNpUHqmWTLXiSP+loXSeAIL+9B3CD2Wl6+RRMbA07o2Fvsnfk7WkXJdAGXQQtYG/Zm9adu2DkvWaSUk0HF5sVIAjd4iGtmcQU3hhwvNZzUaMH7rlc8hMlMFwKZZWGRnJ9ztujOpsnpZcuh3qrYLlIFJoOvVIG5OdYUP3IGeeVsACmMsXBaEjkvLLLxtJ/KFgUoFZtLCnOJYrtGFXiLV3h9SbYxdoFJK89ofizeACNVMTIbHJAEMlM5JzkS7MmBxSFK7yZ2dsBKApcl22+rAqd5CDzPZeSuOSbnTia82KIYjIcyTg/O4anrDMroYTsFXnixSbJ9UBVY6yFwJ+ffsLuDVIsdWLldH9cBApnJWMvZMMPLgoQohXNxjWT7S1XgUx4Ct3Ei24NCTk7xrsXrW2AjeC1OtoBNnNPLDmk0fb1B2Rm227cD1hJ5J6sCn/YQuIMfzM6wnLpX9zm82KQHYOBNsCYBNoBVnIsLP9SpYGjIESmOCa1TkiqwzkPgMS6oXLNKZppOiUH++JTdmQiFvFmKyoPOZoG9hmg5+JCHQB46e/PolJNt0aNvGLT0gBaugXs6QOCF+qNaEvdq3oxiyo64i0dG6MFlXPHTutg09I4gYUGnUGPxruCIYpA/vwJejwWUrW3o07n3oTs5Ag3rlDw0qAJ94JKHwM1cAnhI4D48od5tdcKLHO5zksA9sRZxfn7xbkw7e1EPi5wctBW7w71a3aZIMxoX08wUd0c//pFGVTtbjeWCS5LI29oTx92kFmPYqnN+GjHJdCYcrC+Xua8j9eISD4Grw+2IvZiRbNOMDQY1nmzT9izwixC4K6LXUFqqUKoaT2nO+yG3B53RTRwNvpdsLok2blWB78DPYnjoLJ83stJsGowZkHcfe0ESWQi+FSL1NqFsdosyswRhLa8JUF6emzLc5+G9xYpTerY3UadGOrNyxU/t5Iqs3qPRiuOaMxeKnEwFfpDOn53pB9/P3qxTebVJox80nZrHG6J3Vuu4ZaiD8ZUeO3uopzZ+5fZk9rdoynMGNZxwk51FcejYc9xrubDfu8ikfPRazrOeqASiIMtj1glJ3OF4zsX9RBtsI1LHv89Mdc8kXGjnbtUdoezR5UfdFnZ9sXtgyslqnVhUdkni/gT58d4scIXnJA55HTXDc93oaSaVzjXp1vFB58zi6/YPb4XJFxdKcmiLE72bWSsWqlC/41zK7eOGncOYnuyOUBG8xof9H5WrkpEddbs1Uyz6g7gl8MX4HB/WJ4Jm9TCmHtY74vqNw7xPuU5jr94JhoACcRNWIi6dXhKFVxb2q3z+vVoXmCVKksfCGTE15V2LG9YwfpFXL4BPxOUQX6udB/tF+6yOds0Wk8D/b/kT4C8pCHJzuxhQmgAAAABJRU5ErkJggg==",alt:"Logo"})})}),Object(r.jsx)(S.D,{onClick:this.toggleCollapse}),Object(r.jsx)(S.k,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0,children:Object(r.jsx)(S.C,{right:!0,children:Object(r.jsx)(S.z,{children:Object(r.jsxs)(S.m,{children:[Object(r.jsx)(S.p,{nav:!0,caret:!0,hidden:!1!==this.props.user.anonymous,children:Object(r.jsx)(S.q,{icon:"user"})}),Object(r.jsxs)(S.o,{right:!0,children:[Object(r.jsx)(S.n,{hidden:!this.props.user.isOhrwurmSupervisor,onClick:function(){return e.props.history.push("/members")},children:"Members"}),Object(r.jsx)(S.n,{onClick:function(){return e.props.history.push("/change-password")},children:"Change password"}),Object(r.jsx)(S.n,{href:"#",onClick:function(){return e.logout()},children:"Logout"})]})]})})})})]})}}]),n}(s.a.Component)),I={logout:function(){return function(){var e=Object(f.a)(v.a.mark((function e(t,n,r){var a,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.getClientSnek,e.prev=1,t({type:"USER_LOGOUT_REQUEST"}),e.next=5,a().session.end();case 5:t({type:"USER_LOGOUT_SUCCESS"}),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),s=t({type:"USER_LOGOUT_FAILURE",payload:{errorCode:601,message:"Logout failed",error:e.t0}}),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()}},_=Object(b.f)(Object(l.connect)((function(e){return{user:e.user}}),I)(D)),P=n(26),N=n(121),W=n(58);function F(){var e=Object(C.a)(["\n        mutation updateOhrwurmMember(\n          $token: String!\n          $username: String!\n          $pacs: [ID]\n          $isOhrwurmSupervisor: Boolean\n        ) {\n          updateOhrwurmMember(\n            token: $token\n            username: $username\n            pacs: $pacs\n            isOhrwurmSupervisor: $isOhrwurmSupervisor\n          ) {\n            member {\n              ","\n            }\n          }\n        }\n      "]);return F=function(){return e},e}function H(){var e=Object(C.a)(["\n        mutation deleteOhrwurmMember($token: String!, $username: String!) {\n          deleteOhrwurmMember(token: $token, username: $username) {\n            success\n          }\n        }\n      "]);return H=function(){return e},e}function L(){var e=Object(C.a)(["\n        mutation addOhrwurmMember(\n          $token: String!\n          $username: String!\n          $pacs: [ID]\n          $isOhrwurmSupervisor: Boolean\n        ) {\n          addOhrwurmMember(\n            token: $token\n            username: $username\n            pacs: $pacs\n            isOhrwurmSupervisor: $isOhrwurmSupervisor\n          ) {\n            member {\n              ","\n            }\n            generatedPassword\n          }\n        }\n      "]);return L=function(){return e},e}function Z(){var e=Object(C.a)(["\n        query getOhrwurmMembers($token: String!) {\n          ohrwurmMembers(token: $token) {\n            ","\n          }\n        }\n      "]);return Z=function(){return e},e}function G(){var e=Object(C.a)(["\n        mutation updateTrack(\n          $token: String!\n          $id: ID!\n          $title: String\n          $attendees: [AttendeeType]\n          $description: String\n          $tags: [TagType]\n        ) {\n          updateTrack(\n            token: $token\n            id: $id\n            title: $title\n            attendees: $attendees\n            description: $description\n            tags: $tags\n          ) {\n            track {\n              ","\n            }\n          }\n        }\n      "]);return G=function(){return e},e}function Q(){var e=Object(C.a)(["\n        mutation deleteTrack($token: String, $id: ID!) {\n          deleteTrack(token: $token, id: $id) {\n            success\n          }\n        }\n      "]);return Q=function(){return e},e}function z(){var e=Object(C.a)(["\n        mutation addTrack(\n          $token: String!\n          $pacId: ID!\n          $title: String!\n          $attendees: [AttendeeType]\n          $audioFile: Upload\n          $createdAt: DateTime\n          $description: String\n          $tags: [TagType]\n        ) {\n          addTrack(\n            token: $token\n            pacId: $pacId\n            title: $title\n            attendees: $attendees\n            audioFile: $audioFile\n            createdAt: $createdAt\n            description: $description\n            tags: $tags\n          ) {\n            track {\n              ","\n            }\n          }\n        }\n      "]);return z=function(){return e},e}function Y(){var e=Object(C.a)(["\n          query allPACTracks($token: String!, $pac: ID!) {\n            tracks(token: $token, perPage: 1000, pac: $pac) {\n              ","\n              items{\n                ","\n              }\n            }\n          }  \n        "]);return Y=function(){return e},e}function B(){var e=Object(C.a)(["\n          query allPACTracks($token: String!, $searchQuery: String!, $pac: ID!) {\n            tracks(token: $token, searchQuery: $searchQuery, perPage: 1000, pac: $pac) {\n              ","\n              items{\n                ","\n              }\n            }\n          }\n        "]);return B=function(){return e},e}function J(){var e=Object(C.a)(["\n        mutation updatePAC(\n          $token: String!\n          $id: ID!\n          $title: String\n          $description: String\n          $channelId: String\n          $members: [String]\n        ) {\n          updatePac(\n            token: $token\n            id: $id\n            title: $title\n            description: $description\n            channelId: $channelId\n            members: $members\n          ) {\n            pac {\n              ","\n            }\n          }\n        }\n      "]);return J=function(){return e},e}function $(){var e=Object(C.a)(["\n        mutation deletePAC($token: String!, $id: ID!) {\n          deletePac(token: $token, id: $id) {\n            success\n          }\n        }\n      "]);return $=function(){return e},e}function X(){var e=Object(C.a)(["\n        mutation addPAC(\n          $token: String!\n          $title: String!\n          $description: String\n          $channelId: String\n          $members: [String]\n        ) {\n          addPac(\n            token: $token\n            title: $title\n            description: $description\n            channelId: $channelId\n            members: $members\n          ) {\n            pac {\n              ","\n            }\n          }\n        }\n      "]);return X=function(){return e},e}function V(){var e=Object(C.a)(["\n        query allPACS($token: String!) {\n          projectAudioChannels(token: $token, perPage: 1000) {\n            ","\n            items{\n              ","\n            }\n          }\n        }\n      "]);return V=function(){return e},e}function K(){var e=Object(C.a)(["\n        query allPACS($token: String!, $searchQuery: String!) {\n          projectAudioChannels(token: $token, searchQuery: $searchQuery, perPage: 1000, ) {\n            ","\n            items{\n              ","\n            }\n          }\n        }\n      "]);return K=function(){return e},e}var q="\n  pagination {\n    total\n    nextPage\n  }\n",ee="\n  id\n  username\n  isOhrwurmSupervisor\n  pacs {\n    id\n    title\n    description\n    channelId\n  }\n",te="\n  id\n  title\n  description\n  channelId\n  members {\n    ".concat(ee,"\n  }\n"),ne="\n  id\n  title\n  createdAt\n  audioChannel\n  audioCodec\n  audioBitrate\n  description\n  tags {\n    ... on TagBlock {\n      name\n      significance\n    }\n  }\n  attendees {\n    ... on AttendeeBlock {\n      name\n    }\n  }\n  transcript\n  pac {\n    ".concat(te,"\n  }\n  audioFileUrl\n"),re="\n  id\n  title\n  createdAt\n  audioChannel\n  audioCodec\n  audioBitrate\n  description\n  transcript\n  pac {\n    ".concat(te,"\n  }\n  audioFileUrl\n"),ae=function(e){return function(){var t=Object(f.a)(v.a.mark((function t(n,r,a){var s,c,i,o,l,u;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.getClientSnek,e?(c=M()(K(),q,te),i={searchQuery:e}):(c=M()(V(),q,te),i={}),n({type:"OHRWURM_FETCH_PACS_REQUEST"}),t.next=5,s().session.runner("query",c,i);case 5:o=t.sent,l=o.data,u=o.errors,l&&n({type:"OHRWURM_FETCH_PACS_SUCCESS",payload:{pacs:{pagination:{nextPage:l.projectAudioChannels.pagination.nextPage,total:l.projectAudioChannels.pagination.total},items:l.projectAudioChannels.items}}}),u&&n({type:"OHRWURM_FETCH_PACS_FAILURE",payload:{error:{message:"GraphQL Error"},errorDetails:Object(E.serializeError)(u)}});case 10:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},se=function(e,t){return function(){var n=Object(f.a)(v.a.mark((function n(r,a,s){var c,i,o,l,u,d;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=s.getClientSnek,n.prev=1,t?(i=M()(B(),q,ne),o={pac:e,searchQuery:t}):(i=M()(Y(),q,ne),o={pac:e}),r({type:"OHRWURM_FETCH_TRACKS_REQUEST"}),n.next=6,c().session.runner("query",i,o);case 6:l=n.sent,u=l.data,d=l.errors,u&&r({type:"OHRWURM_FETCH_TRACKS_SUCCESS",payload:{tracks:{pagination:{nextPage:u.tracks.pagination.nextPage,total:u.tracks.pagination.total},pacId:e,items:u.tracks.items}}}),d&&r({type:"OHRWURM_FETCH_TRACKS_FAILURE",payload:{error:{message:"GraphQL Error"},errorDetails:Object(E.serializeError)(d)}}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),r({type:"OHRWURM_FETCH_TRACKS_FAILURE",payload:{errorDetails:Object(E.serializeError)(n.t0)}});case 16:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e,t,r){return n.apply(this,arguments)}}()},ce=function(){return function(){var e=Object(f.a)(v.a.mark((function e(t,n,r){var a,s,c,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.getClientSnek,e.prev=1,s=M()(Z(),ee),t({type:"OHRWURM_FETCH_MEMBERS_REQUEST"}),e.next=6,a().session.runner("mutation",s,{});case 6:if(c=e.sent,i=c.data,!(o=c.errors)){e.next=11;break}throw new Error(o[0].message);case 11:t({type:"OHRWURM_FETCH_MEMBERS_SUCCESS",payload:{members:{items:null===i||void 0===i?void 0:i.ohrwurmMembers}}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t({type:"OHRWURM_FETCH_MEMBERS_FAILURE",payload:{error:{errorCode:999,message:"Fetching Members failed (".concat(e.t0.message,")")},errorDetails:e.t0}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n,r){return e.apply(this,arguments)}}()},ie=(n(481),function(e){return Object(r.jsx)(S.d,{children:e.crumbs.map((function(e,t){return e.active?Object(r.jsx)(S.e,{active:!0,children:e.name},t):Object(r.jsx)(S.e,{children:Object(r.jsx)("a",{href:"#",onClick:function(){return e.onClick?e.onClick():void 0},children:e.name})},t)}))})}),oe=function(e){var t=e.email,n=e.subject,a=e.body,s=e.children,c=e.className;return Object(r.jsx)("a",{href:"mailto:".concat(t,"?subject=").concat(encodeURIComponent(n)||"","&body=").concat(encodeURIComponent(a)||""),className:c,children:s})},le=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.history.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),n}(s.a.Component),ue=(Object(b.f)(le),n(94)),de=(n(482),function(e){var t=Object(a.useState)(""),n=Object(ue.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)(""),o=Object(ue.a)(i,2),l=o[0],u=o[1];return Object(r.jsx)("div",{children:Object(r.jsx)(S.l,{children:Object(r.jsx)(S.H,{className:"justify-content-center",children:Object(r.jsx)(S.j,{md:"6",children:Object(r.jsx)(S.h,{children:Object(r.jsxs)(S.i,{className:"mx-4 mt-4",children:[Object(r.jsx)(S.s,{id:"input",className:"input-login",label:"Your username",group:!0,type:"text",validate:!0,value:s,onChange:function(e){return c(e.target.value)}}),Object(r.jsx)(S.s,{className:"input-login",label:"Your password",group:!0,type:"password",validate:!0,containerClass:"mb-0",value:l,onChange:function(e){return u(e.target.value)}}),Object(r.jsxs)("p",{className:"font-small grey-text d-flex justify-content-end",children:["Forgot",Object(r.jsx)("a",{onClick:function(){return alert("Shit happens \xaf\\_(\u30c4)_/\xaf")},className:"dark-grey-text font-weight-bold ml-1",children:"Password?"})]}),Object(r.jsx)("div",{className:"text-center mb-4 mt-5",children:Object(r.jsx)(S.f,{color:"light-green",type:"button",className:"btn-block z-depth-2 btn-primary",onClick:function(){return e.onSubmit(s,l)},children:"Log in"})}),Object(r.jsxs)("p",{className:"font-small grey-text d-flex justify-content-center",children:["Don't have an account?",Object(r.jsxs)(oe,{email:"foo@bar.baz",subject:"Hello & Welcome",body:"Hello world!",className:"dark-grey-text font-weight-bold ml-1",children:[" ","Contact a supervisor"]})]})]})})})})})})}),pe=n(119),me=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={password:"",confirmPassword:""},e.validPassword=function(){return""!==e.state.password&&""!==e.state.confirmPassword&&e.state.password===e.state.confirmPassword},e.submitHandler=function(t){t.preventDefault(),t.target.className+=" was-validated",e.validPassword()&&e.props.onSubmit(e.state.password)},e.changeHandler=function(t){e.setState(Object(pe.a)({},t.target.name,t.target.value))},e}return Object(x.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsx)("form",{className:"needs-validation",onSubmit:this.submitHandler,noValidate:!0,children:Object(r.jsx)(S.l,{children:Object(r.jsx)(S.H,{className:"justify-content-center",children:Object(r.jsx)(S.j,{md:"6",children:Object(r.jsx)(S.h,{children:Object(r.jsxs)(S.i,{className:"mx-4 mt-4",children:[Object(r.jsxs)("p",{className:"font-small grey-text d-flex justify-content-center",children:["Enter a new password for the user",Object(r.jsx)("p",{className:"dark-grey-text font-weight-bold ml-1",children:this.props.username}),"."]}),Object(r.jsxs)(S.s,{value:this.state.password,name:"password",onChange:this.changeHandler,type:"password",id:"materialFormRegisterPasswordEx3",label:"New password",required:!0,children:[Object(r.jsx)("div",{className:"invalid-feedback",children:"Please enter a valid password."}),Object(r.jsx)("div",{className:"valid-feedback",children:"Looks good!"})]}),Object(r.jsxs)(S.s,{value:this.state.confirmPassword,name:"confirmPassword",onChange:this.changeHandler,type:"password",id:"materialFormRegisterPasswordEx4",label:"Confirm new password",required:!0,children:[Object(r.jsx)("div",{className:"invalid-feedback",children:"Please enter a valid password."}),Object(r.jsx)("div",{className:"valid-feedback",children:"Looks good!"})]}),""===this.state.password&&""===this.state.confirmPassword||this.validPassword()?Object(r.jsx)(r.Fragment,{}):Object(r.jsx)("small",{className:"text-danger",children:"The passwords entered do not match."}),Object(r.jsx)("div",{className:"text-center mb-4 mt-5",children:Object(r.jsx)(S.f,{color:"light-green",type:"submit",className:"btn-block z-depth-2 btn-primary",children:"Change password"})})]})})})})})})})}}]),n}(s.a.Component),he=function(e){var t=Object(a.useState)(0),n=Object(ue.a)(t,2),s=n[0],c=n[1];return Object(r.jsx)(S.l,{children:Object(r.jsx)(S.H,{className:"justify-content-center",children:Object(r.jsx)(S.j,{md:"6",children:Object(r.jsx)(S.h,{children:Object(r.jsxs)(S.i,{className:"mx-4 mt-4",children:[Object(r.jsx)(S.t,{children:e.entries.map((function(e,t){return Object(r.jsx)(S.u,{active:t===s,hover:t!==s,onClick:function(){return c(t)},children:e.title},t)}))}),Object(r.jsx)("div",{className:"text-center mb-4 mt-5",children:Object(r.jsx)(S.f,{color:"light-green",type:"button",className:"btn-block z-depth-2 btn-primary",onClick:function(){return e.onSubmit(s)},children:"Next"})})]})})})})})},je=n(80),be=n.n(je),Oe=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).generateRows=function(){return e.props.entries.map((function(e){return{id:e.id,name:e.title,description:e.description}}))},e.state={columns:[{name:"Name",selector:"name",sortable:!0,grow:.2},{name:"Description",selector:"description"},{name:void 0,cell:function(t){return Object(r.jsx)(S.g,{hidden:!e.props.modify,children:Object(r.jsxs)(S.m,{children:[Object(r.jsx)(S.p,{color:"white",children:Object(r.jsx)(S.q,{icon:"ellipsis-v"})}),Object(r.jsxs)(S.o,{color:"special",children:[Object(r.jsx)(S.n,{onClick:function(){return e.props.onEditClick(t.id)},children:"Edit"}),Object(r.jsx)(S.n,{divider:!0}),Object(r.jsxs)(S.n,{onClick:function(){return e.props.onDeleteClick(t.id)},children:[Object(r.jsx)(S.q,{className:"red-text pr-3",icon:"trash",color:"danger"})," Delete"]})]})]})})},allowOverflow:!0,button:!0,width:"120px"}]},e}return Object(x.a)(n,[{key:"componentDidUpdate",value:function(e,t){e!==this.props&&this.setState({rows:this.generateRows()})}},{key:"render",value:function(){var e=this;return Object(r.jsx)(be.a,{noHeader:!0,columns:this.state.columns,data:this.generateRows(),selectableRows:!0,onRowClicked:function(t){return e.props.onClick(t.id)},highlightOnHover:!0,defaultSortField:"name",overflowY:!0,pagination:!0})}}]),n}(s.a.Component),ve=n(255),fe=n.n(ve),ge=n(79),xe=n.n(ge),ke=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).generateRows=function(){return e.props.entries.map((function(e){return{id:e.id,title:e.title,description:e.description,createdAt:e.createdAt,tags:e.tags,attendees:e.attendees,transcript:e.transcript,audioFileUrl:e.audioFileUrl}}))},e.state={columns:[{name:"Name",selector:"title",sortable:!0,grow:.5},{name:"Created date",selector:"createdAt",sortable:!0,grow:.5,cell:function(e){return Object(r.jsx)("span",{children:xe()(e.createdAt).calendar()})}},{name:"Tags",selector:"tags",cell:function(e){var t;return Object(r.jsx)(S.l,{children:null===(t=e.tags)||void 0===t?void 0:t.map((function(e){return Object(r.jsx)(S.b,{pill:!0,color:e.significance?e.significance.toLowerCase():"light",className:"m-1 shadow-none",children:Object(r.jsx)("p",{className:"mx-2 my-2",children:e.name})})}))})}},{name:"Attendees",selector:"attendees",cell:function(e){var t;return Object(r.jsx)(S.l,{children:null===(t=e.attendees)||void 0===t?void 0:t.map((function(e){return Object(r.jsx)(S.b,{pill:!0,color:"light",className:"m-1 shadow-none",children:Object(r.jsx)("p",{className:"mx-2 my-2",children:e.name})})}))})}},{name:"Audio",selector:"audio",cell:function(e){return Object(r.jsx)(fe.a,{url:e.audioFileUrl,height:"50px",playing:!1,controls:!0})}},{name:void 0,cell:function(t){return Object(r.jsx)(S.g,{children:Object(r.jsxs)(S.m,{children:[Object(r.jsx)(S.p,{color:"white",children:Object(r.jsx)(S.q,{icon:"ellipsis-v"})}),Object(r.jsxs)(S.o,{color:"special",children:[Object(r.jsx)(S.n,{disabled:!0,children:"Play"}),Object(r.jsx)(S.n,{onClick:function(){return e.props.onTranscriptClick(t)},children:"Show transcript"}),Object(r.jsx)(S.n,{hidden:!e.props.modify,onClick:function(){return e.props.onEditClick(t)},children:"Edit"}),Object(r.jsx)(S.n,{href:t.audioFileUrl,download:!0,children:"Download"}),Object(r.jsx)(S.n,{divider:!0,hidden:!e.props.modify}),Object(r.jsxs)(S.n,{hidden:!e.props.modify,onClick:function(){return e.props.onDeleteClick(t)},children:[Object(r.jsx)(S.q,{className:"red-text pr-3",icon:"trash",color:"danger"})," Delete"]})]})]})})},allowOverflow:!0,button:!0,width:"120px"}]},e}return Object(x.a)(n,[{key:"componentDidUpdate",value:function(e,t){e!==this.props&&this.setState({rows:this.generateRows()})}},{key:"render",value:function(){return Object(r.jsx)(be.a,{noHeader:!0,columns:this.state.columns,data:this.generateRows(),highlightOnHover:!0,defaultSortField:"name",overflowY:!0,pagination:!0})}}]),n}(s.a.Component),we=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).generateRows=function(){return(e.props.entries||[]).map((function(e){return{id:e.id,username:e.username,isOhrwurmSupervisor:e.isOhrwurmSupervisor}}))},e.state={columns:[{name:"Username",selector:"username",sortable:!0,grow:.2},{name:"Supervisor",cell:function(e){return e.isOhrwurmSupervisor&&Object(r.jsx)(S.q,{icon:"check"})}},{name:void 0,cell:function(t){return Object(r.jsx)(S.g,{children:Object(r.jsxs)(S.m,{children:[Object(r.jsx)(S.p,{color:"white",children:Object(r.jsx)(S.q,{icon:"ellipsis-v"})}),Object(r.jsxs)(S.o,{color:"danger",children:[Object(r.jsx)(S.n,{onClick:function(){return e.props.onEditClick(t.username)},children:"Edit"}),Object(r.jsx)(S.n,{divider:!0}),Object(r.jsxs)(S.n,{onClick:function(){return e.props.onDeleteClick(t.username)},children:[Object(r.jsx)(S.q,{className:"red-text pr-3",icon:"trash",color:"danger"})," Delete"]})]})]})})},allowOverflow:!0,button:!0,width:"120px"}]},e}return Object(x.a)(n,[{key:"componentDidUpdate",value:function(e,t){e!==this.props&&this.setState({rows:this.generateRows()})}},{key:"render",value:function(){return Object(r.jsx)(be.a,{noHeader:!0,columns:this.state.columns,data:this.generateRows(),highlightOnHover:!0,defaultSortField:"name",overflowY:!0,pagination:!0})}}]),n}(s.a.Component),Se=(n(501),function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={title:"",description:"",channelId:"",members:[],searchQuery:"",editing:!1,filteredMembers:[]},e.componentWillMount=function(){var t;if(e.props.selectedProjectIndex){var n,r,a,s=null===(n=e.props.ohrwurm.pacs)||void 0===n||null===(r=n.items)||void 0===r?void 0:r.find((function(t){return t.id===e.props.selectedProjectIndex}));if(s)e.setState({title:(null===s||void 0===s?void 0:s.title)||"",description:null===s||void 0===s?void 0:s.description,channelId:null===s||void 0===s?void 0:s.channelId,members:null===s||void 0===s||null===(a=s.members)||void 0===a?void 0:a.map((function(e){return e.username})),editing:!0})}e.setState({filteredMembers:null===(t=e.props.ohrwurm.members)||void 0===t?void 0:t.items})},e.setProjectName=function(t){e.setState({title:t.currentTarget.value})},e.setChannelId=function(t){e.setState({channelId:t.currentTarget.value})},e.setDescription=function(t){e.setState({description:t.currentTarget.value})},e.setMembers=function(t){var n,r,a=e.state.members,s=t.currentTarget.value;(a||[]).includes(s)?a=null===(n=a)||void 0===n?void 0:n.filter((function(e){return e!==s})):null===(r=a)||void 0===r||r.push(s);e.setState({members:a})},e.search=function(t){var n,r=(null===(n=e.props.ohrwurm.members)||void 0===n?void 0:n.items)||[];""!==t&&(r=r.filter((function(e){return e.username.toLowerCase().includes(t.toLowerCase())}))),e.setState({searchQuery:t,filteredMembers:r})},e.onSubmit=Object(f.a)(v.a.mark((function t(){var n,r,a,s,c,i,o,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=n.title,a=n.description,s=n.channelId,c=n.members,!e.state.editing){t.next=11;break}if(!(l=null===(i=e.props.ohrwurm.pacs)||void 0===i||null===(o=i.items)||void 0===o?void 0:o.find((function(t){return t.id===e.props.selectedProjectIndex})))){t.next=9;break}return l.title===r&&(r=void 0),l.description===a&&(a=void 0),l.channelId===s&&(s=void 0),t.next=9,e.props.updateTrack(l.id,r,a,s,c);case 9:t.next=13;break;case 11:return t.next=13,e.props.addTrack(r,a,s,c);case 13:e.props.toggle();case 14:case"end":return t.stop()}}),t)}))),e.checkChecked=function(t){var n;return!!(null===(n=e.state.members)||void 0===n?void 0:n.includes(t))},e}return Object(x.a)(n,[{key:"render",value:function(){var e=this;return Object(r.jsx)(S.v,{isOpen:!0,toggle:this.props.toggle,size:"lg",id:"projectmodal",children:Object(r.jsx)(S.w,{children:Object(r.jsx)(S.H,{children:Object(r.jsxs)(S.j,{children:[Object(r.jsx)(S.s,{id:"input",className:"input-track",label:"Project name",group:!0,type:"text",validate:!0,value:this.state.title,onChange:function(t){return e.setProjectName(t)}}),Object(r.jsx)(S.s,{id:"input",className:"input-track",label:"Channel ID",group:!0,type:"text",validate:!0,value:this.state.channelId,onChange:function(t){return e.setChannelId(t)}}),Object(r.jsx)(S.s,{id:"input",className:"input-track",label:"Description",group:!0,type:"textarea",validate:!0,value:this.state.description,onChange:function(t){return e.setDescription(t)}}),Object(r.jsx)("label",{children:"Member"}),Object(r.jsxs)("div",{className:"rounded mb-0 border border-light",children:[Object(r.jsx)("div",{className:"mb-0",children:Object(r.jsx)(S.s,{hint:"Search",type:"text",value:this.state.searchQuery,containerClass:"active-pink active-pink-2 mt-0 mb-3",onChange:function(t){return e.search(t.target.value)}})}),Object(r.jsx)(S.t,{children:(this.state.filteredMembers||[]).map((function(t,n){return Object(r.jsx)(S.u,{children:Object(r.jsx)(S.s,{type:"checkbox",id:n.toString(),label:t.username,value:t.username,checked:e.checkChecked(t.username),onChange:function(t){return e.setMembers(t)}})})}))})]}),Object(r.jsx)("div",{className:"text-right mb-4 mt-5",children:Object(r.jsx)(S.f,{rounded:!0,color:"light-green",type:"button",className:"z-depth-2 btn-primary",onClick:function(){return e.onSubmit()},children:"Save"})})]})})})})}}]),n}(s.a.Component)),Ce={fetchPACS:ae,fetchPACTracks:se},Re=Object(b.f)(Object(l.connect)((function(e){return{ohrwurm:e.ohrwurm}}),Ce)(Se)),Ee=(n(502),function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={searchQuery:"",username:"",isOhrwurmSupervisor:!1,editing:!1,pacs:[]},e.componentWillMount=function(){if(e.props.fetchPACS(),e.props.username){var t,n,r=null===(t=e.props.ohrwurm.members)||void 0===t||null===(n=t.items)||void 0===n?void 0:n.find((function(t){return t.username===e.props.username}));r&&e.setState({username:r.username,isOhrwurmSupervisor:r.isOhrwurmSupervisor,editing:!0,pacs:r.pacs.map((function(e){return e.id}))})}},e.setUsername=function(t){e.setState({username:t.currentTarget.value})},e.setSupervisor=function(t){e.setState({isOhrwurmSupervisor:t.currentTarget.checked})},e.setProjects=function(t){var n,r,a=e.state.pacs,s=t.currentTarget.value;(a||[]).includes(s)?a=null===(n=a)||void 0===n?void 0:n.filter((function(e){return e!==s})):null===(r=a)||void 0===r||r.push(s);e.setState({pacs:a})},e.search=function(t){e.setState({searchQuery:t}),e.props.fetchPACS(t)},e.onSubmit=Object(f.a)(v.a.mark((function t(){var n,r,a,s,c,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=n.username,a=n.isOhrwurmSupervisor,s=n.pacs,!e.state.editing){t.next=6;break}return t.next=4,e.props.updateMember(r,s,a);case 4:t.next=9;break;case 6:return t.next=8,e.props.addMember(r,s,a);case 8:alert("Generated password for user ".concat(r,": <").concat(null===(c=e.props.ohrwurm.members)||void 0===c||null===(i=c.added)||void 0===i?void 0:i.generatedPassword,">"));case 9:e.props.toggle();case 10:case"end":return t.stop()}}),t)}))),e.checkChecked=function(t){var n;return!!(null===(n=e.state.pacs)||void 0===n?void 0:n.includes(t))},e}return Object(x.a)(n,[{key:"render",value:function(){var e,t,n=this;return Object(r.jsx)(S.v,{isOpen:!0,toggle:this.props.toggle,size:"lg",id:"membermodal",children:Object(r.jsx)(S.w,{children:Object(r.jsx)(S.H,{children:Object(r.jsxs)(S.j,{children:[Object(r.jsx)(S.s,{id:"input",className:"input-track",label:"Username",group:!0,type:"text",validate:!0,disabled:this.state.editing,value:this.state.username,onChange:function(e){return n.setUsername(e)}}),Object(r.jsx)(S.s,{label:"Supervisor",type:"checkbox",id:"checkbox1",checked:this.state.isOhrwurmSupervisor,onChange:function(e){return n.setSupervisor(e)}}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{children:"Projects"}),Object(r.jsxs)("div",{className:"rounded mb-0 border border-light",children:[Object(r.jsx)("div",{className:"mb-0",children:Object(r.jsx)(S.s,{hint:"Search",type:"text",value:this.state.searchQuery,containerClass:"active-pink active-pink-2 mt-0 mb-3",onChange:function(e){return n.search(e.target.value)}})}),Object(r.jsx)(S.t,{children:((null===(e=this.props.ohrwurm)||void 0===e||null===(t=e.pacs)||void 0===t?void 0:t.items)||[]).map((function(e,t){return Object(r.jsx)(S.u,{children:Object(r.jsx)(S.s,{type:"checkbox",id:t.toString(),label:e.title,value:e.id,checked:n.checkChecked(e.id),onChange:function(e){return n.setProjects(e)}})})}))})]}),Object(r.jsx)("div",{className:"text-right mb-4 mt-5",children:Object(r.jsx)(S.f,{rounded:!0,color:"light-green",type:"button",className:"z-depth-2 btn-primary",onClick:function(){return n.onSubmit()},children:"Save"})})]})})})})}}]),n}(s.a.Component)),ye={fetchPACS:ae},Me=Object(b.f)(Object(l.connect)((function(e){return{ohrwurm:e.ohrwurm}}),ye)(Ee)),Ae=n(159),Te=(n(503),function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1,error:[],attendees:[],tags:[],title:"",description:"",createdAt:new Date,audioFile:null,audioFileUrl:"",editing:!1},e.componentWillMount=function(){if(e.props.track){var t=e.props.track,n=t.tags,r=t.title,a=t.createdAt,s=t.audioFile,c=t.description,i=t.attendees,o=t.audioFileUrl;e.setState({attendees:(i||[]).map((function(e){return{name:e.name,significance:"LIGHT"}})),tags:(n||[]).map((function(e){return{name:e.name,significance:e.significance.toUpperCase()}})),title:r,description:c,createdAt:a,audioFile:s,audioFileUrl:o,editing:!0})}e.props.audioFile&&e.setState({audioFile:e.props.audioFile})},e.setTrackName=function(t){e.setState({title:t.currentTarget.value})},e.setDescription=function(t){e.setState({description:t.currentTarget.value})},e.setDate=function(t){e.setState({createdAt:new Date(t.currentTarget.value)})},e.onDrop=function(){var t=Object(f.a)(v.a.mark((function t(n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n[0],e.setState({audioFile:r});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=Object(f.a)(v.a.mark((function t(){var n,r,a,s,c,i,o,l,u,d,p,m,h,j,b,O,f,g;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0}),n=e.state,r=n.title,a=n.attendees,s=n.audioFile,c=n.createdAt,i=n.description,o=n.tags,l=(a||[]).map((function(e){return{name:e.name}})),!e.state.editing){t.next=14;break}return O=null===(u=e.props.track)||void 0===u?void 0:u.id,r===(null===(d=e.props.track)||void 0===d?void 0:d.title)&&(r=void 0),i===(null===(p=e.props.track)||void 0===p?void 0:p.description)&&(i=void 0),o===(null===(m=e.props.track)||void 0===m?void 0:m.tags)&&(o=void 0),f=null===(h=e.props.track)||void 0===h||null===(j=h.attendees)||void 0===j?void 0:j.map((function(e){return{name:e.name}})),JSON.stringify(f)===JSON.stringify(l)&&(l=void 0),t.next=12,e.props.updateTrack(null===(b=O||0)||void 0===b?void 0:b.toString(),r,l,i,o);case 12:t.next=16;break;case 14:return t.next=16,e.props.addTrack(null===(g=e.props.ohrwurm.tracks)||void 0===g?void 0:g.pacId,r,l,s,c,i,o);case 16:e.setState({loading:!1}),e.props.toggle();case 18:case"end":return t.stop()}}),t)}))),e}return Object(x.a)(n,[{key:"render",value:function(){var e=this;return Object(r.jsx)(S.v,{isOpen:!0,toggle:this.props.toggle,size:"lg",children:Object(r.jsxs)(S.w,{children:[this.state.loading&&Object(r.jsx)(S.G,{material:!0,value:100,animated:!0,height:"25px",color:"success",className:"mb-0 pb-0",children:"Uploading file"}),Object(r.jsx)(S.H,{children:Object(r.jsxs)(S.j,{children:[Object(r.jsx)(S.s,{id:"input",className:"input-track",label:"Track name",group:!0,type:"text",validate:!0,value:this.state.title,onChange:function(t){return e.setTrackName(t)}}),Object(r.jsx)(S.s,{id:"input",className:"input-track",label:"Description",group:!0,type:"textarea",validate:!0,value:this.state.description,onChange:function(t){return e.setDescription(t)}}),Object(r.jsx)(S.s,{id:"input",disabled:this.state.editing,className:"input-track",label:"Date",group:!0,type:"date",validate:!0,value:xe()(this.state.createdAt).format("YYYY-MM-DD"),onChange:function(t){return e.setDate(t)}}),Object(r.jsx)(N.a,{onDrop:this.onDrop,accept:"audio/*",disabled:this.state.editing,children:function(t){var n=t.getRootProps,a=t.getInputProps;t.acceptedFiles;return Object(r.jsxs)("div",Object(P.a)(Object(P.a)({},n()),{},{children:[Object(r.jsx)("input",Object(P.a)({},a())),e.state.error.length>0||null!==e.state.audioFile?Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)("ul",{className:"list-group mt-2",children:Object(r.jsxs)("li",{className:"list-group-item list-group-item-success",children:[Object(r.jsx)(S.q,{icon:"cloud-upload-alt",className:"green-text",size:"3x"}),Object(r.jsx)("p",{className:"lead mt-3 mb-0",children:e.state.audioFile?e.state.audioFile.name:e.state.audioFileUrl})]})}),e.state.loading&&Object(r.jsx)(S.G,{material:!0,value:100,animated:!0,height:"25px",color:"success",className:"mb-0 pb-0",children:"Uploading file"}),Object(r.jsx)("ul",{className:"list-group mt-2",children:e.state.error.length>0&&e.state.error.map((function(e,t){return Object(r.jsxs)("li",{className:"list-group-item list-group-item-danger",children:[Object(r.jsx)(S.q,{icon:"times",className:"danger-text",size:"6x"}),Object(r.jsx)("p",{}),Object(r.jsx)("h3",{children:e})]},t)}))})]}):Object(r.jsxs)("div",{className:"border rounded px-4 pt-4 pb-3 clickable text-center",children:[Object(r.jsx)(S.q,{icon:"cloud-upload-alt",className:"green-text",size:"3x"}),Object(r.jsx)("p",{className:"lead mt-3 mb-0",children:"Click here or drop a file to upload!"})]})]}))}}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{children:"Tags"}),Object(r.jsx)("div",{className:"tags",children:Object(r.jsx)(Ae.a,{tags:this.state.tags||[],onChange:function(t){return e.setState({tags:t})},placeholder:"Type and press enter",editable:!0,readOnly:!1})}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{children:"Attendees"}),Object(r.jsx)("div",{className:"attendees",children:Object(r.jsx)(Ae.a,{tags:this.state.attendees||[],onChange:function(t){return e.setState({attendees:t})},placeholder:"Type and press enter",editable:!0,readOnly:!1})}),Object(r.jsx)("div",{className:"text-center mb-4 mt-5",children:Object(r.jsx)(S.f,{color:"light-green",type:"button",className:"btn-block z-depth-2 btn-primary",onClick:function(){return e.onSubmit()},children:"Save"})})]})})]})})}}]),n}(s.a.Component)),Ue={fetchPACS:ae,fetchPACTracks:se},De=Object(b.f)(Object(l.connect)((function(e){return{ohrwurm:e.ohrwurm}}),Ue)(Te)),Ie=(n(504),function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={activeTable:"PROJECT",showTranscriptModal:!1,transcriptTitle:"",transcriptText:"",editingProject:!1,projectModal:!1,trackModal:!1,selectedTrack:void 0,error:[],audioFile:null},e.componentDidMount=function(){e.props.fetchPACS(),e.props.fetchMember()},e.switchTable=function(t){e.setState({activeTable:t})},e.selectProject=function(t){e.state.editingProject?e.setState({editingProject:!1}):(e.props.fetchPACTracks(t),e.setState({selectedProjectIndex:t,searchQuery:""}),e.switchTable("TRACK"))},e.deleteProject=function(){var t=Object(f.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.editingProject=!0,e.setState({editingProject:!0},(function(){e.props.deletePAC(n),e.setState({editingProject:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editProject=function(t){e.setState({selectedProjectIndex:t}),e.setState({editingProject:!0}),e.toggleProjectModal()},e.selectTrack=function(t){e.setState({transcriptTitle:t.title,transcriptText:t.transcript}),e.toggleTranscriptModal()},e.toggleTranscriptModal=function(){e.setState({showTranscriptModal:!e.state.showTranscriptModal})},e.search=function(t){e.setState({searchQuery:t}),"TRACK"===e.state.activeTable&&e.state.selectedProjectIndex&&e.props.fetchPACTracks(e.state.selectedProjectIndex,t),"PROJECT"===e.state.activeTable&&e.props.fetchPACS(t)},e.toggleProjectModal=Object(f.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({projectModal:!e.state.projectModal}),e.state.projectModal&&e.setState({selectedProjectIndex:""});case 2:case"end":return t.stop()}}),t)}))),e.toggleTrackModal=function(){e.setState({trackModal:!e.state.trackModal}),e.state.trackModal&&e.setState({selectedTrack:void 0,audioFile:null})},e.deleteTrack=function(){var t=Object(f.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.deleteTrack(n.id);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editTrack=function(t){e.setState({selectedTrack:t}),e.toggleTrackModal()},e.onDrop=function(){var t=Object(f.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.length>0?(e.setState({audioFile:n[0],error:[]}),e.toggleTrackModal()):e.setState({error:["Only sound related file uploading is supported!"]});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(x.a)(n,[{key:"render",value:function(){var e,t,n=this;return Object(r.jsxs)(r.Fragment,{children:["PROJECT"===this.state.activeTable?Object(r.jsx)(ie,{crumbs:[{name:"Ohrwurm",onClick:function(){return n.props.history.push("/")}},{name:"Projects",active:!0}]}):Object(r.jsx)(ie,{crumbs:[{name:"Ohrwurm",onClick:function(){return n.props.history.push("/")}},{name:"Project",onClick:function(){return n.switchTable("PROJECT")}},{name:"Track",active:!0}]}),Object(r.jsxs)(S.H,{children:[Object(r.jsx)(S.j,{size:"11",children:Object(r.jsx)(S.s,{hint:"Search",type:"text",value:this.state.searchQuery,containerClass:"active-pink active-pink-2 mt-0 mb-3",onChange:function(e){return n.search(e.target.value)}})}),Object(r.jsx)(S.j,{size:"1",children:"PROJECT"===this.state.activeTable?Object(r.jsx)(S.f,{flat:!0,onClick:function(){return n.toggleProjectModal()},children:Object(r.jsx)(S.q,{icon:"plus",size:"lg",className:"blue-text"})}):Object(r.jsx)(S.f,{flat:!0,onClick:function(){return n.toggleTrackModal()},children:Object(r.jsx)(S.q,{icon:"upload",size:"lg",className:"blue-text"})})})]}),Object(r.jsx)(S.l,{children:Object(r.jsxs)(S.v,{isOpen:this.state.showTranscriptModal,toggle:this.toggleTranscriptModal,fullHeight:!0,position:"left",children:[Object(r.jsxs)(S.y,{toggle:this.toggleTranscriptModal,children:[Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("span",{className:"dark-grey-text font-medium ml-3",children:(t=this.state.transcriptTitle||"",t.length>5?"".concat(t.substring(0,25),"..."):t)})}),Object(r.jsx)("a",{className:"dark-grey-text font-small font-weight-bold ml-1",children:"Transcript"})]}),Object(r.jsx)(S.w,{className:"modal-body",children:this.state.transcriptText}),Object(r.jsx)(S.x,{children:Object(r.jsx)(S.q,{icon:"snowman"})})]})}),"PROJECT"===this.state.activeTable?Object(r.jsx)(Oe,{modify:this.props.user.isOhrwurmSupervisor,entries:(null===(e=this.props.ohrwurm.pacs)||void 0===e?void 0:e.items)?this.props.ohrwurm.pacs.items:[],onClick:this.selectProject,onDeleteClick:this.deleteProject,onEditClick:this.editProject}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ul",{className:"list-group mt-2",children:this.state.error.length>0&&this.state.error.map((function(e,t){return Object(r.jsx)("li",{className:"list-group-item list-group-item-danger",children:Object(r.jsx)("h3",{children:e})},t)}))}),Object(r.jsx)(N.a,{onDrop:this.onDrop,accept:"audio/*",noClick:!0,multiple:!1,children:function(e){var t,a=e.getRootProps,s=e.getInputProps;e.acceptedFiles;return Object(r.jsxs)("div",Object(P.a)(Object(P.a)({},a()),{},{children:[Object(r.jsx)("input",Object(P.a)({},s())),Object(r.jsx)(ke,{modify:n.props.user.isOhrwurmSupervisor,entries:(null===(t=n.props.ohrwurm.tracks)||void 0===t?void 0:t.items)?n.props.ohrwurm.tracks.items:[],onTranscriptClick:n.selectTrack,onDeleteClick:n.deleteTrack,onEditClick:n.editTrack})]}))}})]}),this.state.projectModal&&Object(r.jsx)(Re,{toggle:this.toggleProjectModal,selectedProjectIndex:this.state.selectedProjectIndex,addTrack:this.props.addPAC,updateTrack:this.props.updatePAC}),this.state.trackModal&&Object(r.jsx)(De,{audioFile:this.state.audioFile,toggle:this.toggleTrackModal,track:this.state.selectedTrack,addTrack:this.props.addTrack,updateTrack:this.props.updateTrack})]})}}]),n}(s.a.Component)),_e={fetchPACS:ae,fetchPACTracks:se,addTrack:function(e,t,n,r,a,s,c){return function(){var i=Object(f.a)(v.a.mark((function i(o,l,u){var d,p,m,h,j,b,O,f;return v.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return d=u.getClientSnek,i.prev=1,p=M()(z(),re),o({type:"OHRWURM_ADD_TRACK_REQUEST"}),i.next=6,d().session.runner("mutation",p,{pacId:e,title:t,attendees:n,audioFile:r,createdAt:a,description:s,tags:c});case 6:if(m=i.sent,h=m.data,!(j=m.errors)){i.next=11;break}throw new Error(j[0].message);case 11:(b=l().ohrwurm.tracks)||(b={pacId:"0",pagination:{total:0,nextPage:0},items:[]}),h&&(f=null===(O=b.items)||void 0===O?void 0:O.concat({id:h.addTrack.track.id,title:t,attendees:n,audioFile:r,createdAt:a,description:s,tags:c,audioFileUrl:h.addTrack.track.audioFileUrl,transcript:h.addTrack.track.transcript,pac:h.addTrack.track.pac}),b.items=f),o({type:"OHRWURM_ADD_TRACK_SUCCESS",payload:{tracks:b}}),i.next=20;break;case 17:i.prev=17,i.t0=i.catch(1),o({type:"OHRWURM_ADD_TRACK_FAILURE",payload:{error:{errorCode:999,message:"Adding Track failed (".concat(i.t0.message,")")},errorDetails:i.t0}});case 20:case"end":return i.stop()}}),i,null,[[1,17]])})));return function(e,t,n){return i.apply(this,arguments)}}()},deleteTrack:function(e){return function(){var t=Object(f.a)(v.a.mark((function t(n,r,a){var s,c,i,o,l,u,d,p;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.getClientSnek,t.prev=1,c=M()(Q()),n({type:"OHRWURM_DELETE_TRACK_REQUEST"}),t.next=6,s().session.runner("mutation",c,{id:e});case 6:if(i=t.sent,o=i.data,!(l=i.errors)){t.next=11;break}throw new Error(l[0].message);case 11:(u=r().ohrwurm.tracks)||(u={pacId:"0",pagination:{total:0,nextPage:0},items:[]}),o&&(p=null===(d=u.items)||void 0===d?void 0:d.filter((function(t){return t.id.toString()!==e})),u.items=p),n({type:"OHRWURM_DELETE_TRACK_SUCCESS",payload:{tracks:u}}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n({type:"OHRWURM_DELETE_TRACK_FAILURE",payload:{error:{errorCode:999,message:"Deleting Track failed (".concat(t.t0.message,")")},errorDetails:t.t0}});case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e,n,r){return t.apply(this,arguments)}}()},updateTrack:function(e,t,n,r,a){return function(){var s=Object(f.a)(v.a.mark((function s(c,i,o){var l,u,d,p,m,h,j,b,O;return v.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return l=o.getClientSnek,s.prev=1,u=M()(G(),re),c({type:"OHRWURM_UPDATE_TRACK_REQUEST"}),s.next=6,l().session.runner("mutation",u,{id:e,title:t,attendees:n,description:r,tags:a});case 6:if(d=s.sent,p=d.data,!(m=d.errors)){s.next=11;break}throw new Error(m[0].message);case 11:(null===(h=i().ohrwurm.tracks)||void 0===h?void 0:h.items)&&p&&(b=null===(j=h.items)||void 0===j?void 0:j.findIndex((function(t){return t.id.toString()===e})),O=[].concat(Object(W.a)(h.items.slice(0,b)),[{id:p.updateTrack.track.id,title:t||h.items[b].title,attendees:n||h.items[b].attendees,audioFile:h.items[b].audioFile,createAt:h.items[b].createdAt,description:r||h.items[b].description,tags:a||h.items[b].tags,audioFileUrl:h.items[b].audioFileUrl,transcript:h.items[b].transcript,pac:h.items[b].pac}],Object(W.a)(h.items.slice(b+1))),h.items=Object(W.a)(O)),c({type:"OHRWURM_UPDATE_TRACK_SUCCESS",payload:{tracks:h}}),s.next=19;break;case 16:s.prev=16,s.t0=s.catch(1),c({type:"OHRWURM_UPDATE_TRACK_FAILURE",payload:{error:{errorCode:999,message:"Updating Track failed (".concat(s.t0.message,")")},errorDetails:s.t0}});case 19:case"end":return s.stop()}}),s,null,[[1,16]])})));return function(e,t,n){return s.apply(this,arguments)}}()},addPAC:function(e,t,n,r){return function(){var a=Object(f.a)(v.a.mark((function a(s,c,i){var o,l,u,d,p,m,h;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=i.getClientSnek,a.prev=1,l=M()(X(),te),s({type:"OHRWURM_ADD_PAC_REQUEST"}),a.next=6,o().session.runner("mutation",l,{title:e,description:t,channelId:n,members:r});case 6:if(u=a.sent,d=u.data,!(p=u.errors)){a.next=11;break}throw new Error(p[0].message);case 11:(m=c().ohrwurm.pacs)||(m={pagination:{total:0,nextPage:0},items:[]}),d&&(h=m.items.concat({id:d.addPac.pac.id,title:e,description:t,channelId:n,members:d.addPac.pac.members}),m.items=h),s({type:"OHRWURM_ADD_PAC_SUCCESS",payload:{pacs:m}}),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(1),s({type:"OHRWURM_ADD_PAC_FAILURE",payload:{error:{errorCode:999,message:"Adding PAC failed (".concat(a.t0.message,")")},errorDetails:a.t0}});case 20:case"end":return a.stop()}}),a,null,[[1,17]])})));return function(e,t,n){return a.apply(this,arguments)}}()},deletePAC:function(e){return function(){var t=Object(f.a)(v.a.mark((function t(n,r,a){var s,c,i,o,l;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.getClientSnek,t.prev=1,c=M()($()),n({type:"OHRWURM_DELETE_PAC_REQUEST"}),t.next=6,s().session.runner("mutation",c,{id:e});case 6:if(i=t.sent,i.data,!(o=i.errors)){t.next=11;break}throw new Error(o[0].message);case 11:(l=r().ohrwurm.pacs)||(l={pagination:{total:0,nextPage:0},items:[]}),l.items=l.items.filter((function(t){return t.id!==e})),n({type:"OHRWURM_DELETE_PAC_SUCCESS",payload:{pacs:l}}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n({type:"OHRWURM_DELETE_PAC_FAILURE",payload:{error:{errorCode:999,message:"Deleting PAC failed (".concat(t.t0.message,")")},errorDetails:t.t0}});case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e,n,r){return t.apply(this,arguments)}}()},updatePAC:function(e,t,n,r,a){return function(){var s=Object(f.a)(v.a.mark((function s(c,i,o){var l,u,d,p,m,h,j,b;return v.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return l=o.getClientSnek,s.prev=1,u=M()(J(),te),c({type:"OHRWURM_UPDATE_PAC_REQUEST"}),s.next=6,l().session.runner("mutation",u,{id:e,title:t,description:n,channelId:r,members:a});case 6:if(d=s.sent,p=d.data,!(m=d.errors)){s.next=11;break}throw new Error(m[0].message);case 11:(h=i().ohrwurm.pacs)&&p&&(j=h.items.findIndex((function(t){return t.id===e})),b=[].concat(Object(W.a)(h.items.slice(0,j)),[p.updatePac.pac],Object(W.a)(h.items.slice(j+1))),h.items=Object(W.a)(b)),c({type:"OHRWURM_UPDATE_PAC_SUCCESS",payload:{pacs:h}}),s.next=19;break;case 16:s.prev=16,s.t0=s.catch(1),c({type:"OHRWURM_UPDATE_PAC_FAILURE",payload:{error:{errorCode:999,message:"Updating PAC failed (".concat(s.t0.message,")")},errorDetails:s.t0}});case 19:case"end":return s.stop()}}),s,null,[[1,16]])})));return function(e,t,n){return s.apply(this,arguments)}}()},fetchMember:ce},Pe=Object(b.f)(Object(l.connect)((function(e){return{user:e.user,ohrwurm:e.ohrwurm}}),_e)(Ie)),Ne=(n(505),function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return!1===this.props.user.passwordChanged&&this.props.history.push("/change-password"),!0===this.props.user.anonymous&&this.props.history.push("/login"),Object(r.jsx)(r.Fragment,{children:!1===this.props.user.anonymous&&Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{id:"base",className:"mt-1",children:Object(r.jsx)("div",{className:"ml-5 mr-5",children:Object(r.jsx)(Pe,{})})})})})}}]),n}(s.a.Component)),We=Object(b.f)(Object(l.connect)((function(e){return{user:e.user}}),{})(Ne)),Fe=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={searchQuery:"",memberModal:!1,username:"",editing:!1},e.componentDidMount=function(){e.props.fetchMembers()},e.deleteUser=function(){var t=Object(f.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.deleteMember(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editUser=function(t){e.setState({username:t}),e.toggleMemberModal()},e.search=function(t){e.setState({searchQuery:t})},e.toggleMemberModal=function(){e.setState({memberModal:!e.state.memberModal}),e.state.memberModal&&e.setState({username:""})},e}return Object(x.a)(n,[{key:"render",value:function(){var e,t=this;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{id:"base",className:"mt-1",children:Object(r.jsxs)("div",{className:"ml-5 mr-5",children:[Object(r.jsx)(ie,{crumbs:[{name:"Ohrwurm",onClick:function(){return t.props.history.push("/")}},{name:"Members management",active:!0}]}),Object(r.jsxs)(S.H,{children:[Object(r.jsx)(S.j,{size:"11",children:Object(r.jsx)(S.s,{disabled:!0,hint:"Search",type:"text",value:this.state.searchQuery,containerClass:"active-pink active-pink-2 mt-0 mb-3",onChange:function(e){return t.search(e.target.value)}})}),Object(r.jsx)(S.j,{size:"1",children:Object(r.jsx)(S.f,{flat:!0,onClick:function(){return t.toggleMemberModal()},children:Object(r.jsx)(S.q,{icon:"plus",size:"lg",className:"blue-text"})})})]}),Object(r.jsx)(we,{entries:null===(e=this.props.ohrwurm.members)||void 0===e?void 0:e.items,onDeleteClick:function(e){return t.deleteUser(e)},onEditClick:function(e){return t.editUser(e)}})]})}),this.state.memberModal&&Object(r.jsx)(Me,{toggle:this.toggleMemberModal,username:this.state.username,addMember:this.props.addMember,updateMember:this.props.updateMember})]})}}]),n}(s.a.Component),He={login:U,fetchMembers:ce,addMember:function(e,t,n){return function(){var r=Object(f.a)(v.a.mark((function r(a,s,c){var i,o,l,u,d,p,m;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=c.getClientSnek,r.prev=1,o=M()(L(),ee),a({type:"OHRWURM_ADD_MEMBER_REQUEST"}),r.next=6,i().session.runner("mutation",o,{username:e,pacs:t,isOhrwurmSupervisor:n});case 6:if(l=r.sent,u=l.data,!(d=l.errors)){r.next=11;break}throw new Error(d[0].message);case 11:(p=s().ohrwurm.members)||(p={items:[]}),u&&(null===(m=p.items)||void 0===m||m.push(u.addOhrwurmMember.member),p.added={username:u.addOhrwurmMember.member.username,generatedPassword:u.addOhrwurmMember.generatedPassword}),a({type:"OHRWURM_ADD_PAC_SUCCESS",payload:{members:p}}),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(1),a({type:"OHRWURM_ADD_PAC_FAILURE",payload:{error:{errorCode:999,message:"Adding Member failed (".concat(r.t0.message,")")},errorDetails:r.t0}});case 20:case"end":return r.stop()}}),r,null,[[1,17]])})));return function(e,t,n){return r.apply(this,arguments)}}()},deleteMember:function(e){return function(){var t=Object(f.a)(v.a.mark((function t(n,r,a){var s,c,i,o,l,u,d;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.getClientSnek,t.prev=1,c=M()(H()),n({type:"OHRWURM_DELETE_MEMBER_REQUEST"}),t.next=6,s().session.runner("mutation",c,{username:e});case 6:if(i=t.sent,o=i.data,!(l=i.errors)){t.next=11;break}throw new Error(l[0].message);case 11:(u=r().ohrwurm.members)||(u={items:[]}),o&&(u.items=null===(d=u.items)||void 0===d?void 0:d.filter((function(t){return t.username!==e}))),n({type:"OHRWURM_DELETE_MEMBER_SUCCESS",payload:{members:u}}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n({type:"OHRWURM_DELETE_MEMBER_FAILURE",payload:{error:{errorCode:999,message:"Deleting Member failed (".concat(t.t0.message,")")},errorDetails:t.t0}});case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e,n,r){return t.apply(this,arguments)}}()},updateMember:function(e,t,n){return function(){var r=Object(f.a)(v.a.mark((function r(a,s,c){var i,o,l,u,d,p,m,h,j;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=c.getClientSnek,r.prev=1,o=M()(F(),ee),a({type:"OHRWURM_UPDATE_MEMBER_REQUEST"}),r.next=6,i().session.runner("mutation",o,{username:e,pacs:t,isOhrwurmSupervisor:n});case 6:if(l=r.sent,u=l.data,!(d=l.errors)){r.next=11;break}throw new Error(d[0].message);case 11:(null===(p=s().ohrwurm.members)||void 0===p?void 0:p.items)&&u&&(h=null===(m=p.items)||void 0===m?void 0:m.findIndex((function(t){return t.username===e})),j=[].concat(Object(W.a)(p.items.slice(0,h)),[u.updateOhrwurmMember.member],Object(W.a)(p.items.slice(h+1))),p.items=Object(W.a)(j)),a({type:"OHRWURM_UPDATE_MEMBER_SUCCESS",payload:{members:p}}),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(1),a({type:"OHRWURM_UPDATE_MEMBER_FAILURE",payload:{error:{errorCode:999,message:"Updating Member failed (".concat(r.t0.message,")")},errorDetails:r.t0}});case 19:case"end":return r.stop()}}),r,null,[[1,16]])})));return function(e,t,n){return r.apply(this,arguments)}}()}},Le=Object(b.f)(Object(l.connect)((function(e){return{user:e.user,ohrwurm:e.ohrwurm}}),He)(Fe)),Ze=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={activeForm:"SERVICE"},e.componentDidMount=function(){!1===e.props.user.anonymous&&e.props.history.push("/")},e.componentDidUpdate=function(){!1===e.props.user.anonymous&&e.props.history.push("/")},e.switchForm=function(t){e.setState({activeForm:t})},e.submitService=function(t){window.localStorage.setItem("ohrwurm_service_index",t.toString()),e.switchForm("AUTH")},e.submitAuth=function(){var t=Object(f.a)(v.a.mark((function t(n,r){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.login({username:n,password:r});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(x.a)(n,[{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{id:"login",className:"m-5",children:!0===this.props.user.anonymous&&Object(r.jsx)(S.l,{children:"SERVICE"===this.state.activeForm?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ie,{crumbs:[{name:"Services",active:!0}]}),Object(r.jsx)(he,{entries:j.ohrwurm,onSubmit:this.submitService})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ie,{crumbs:[{name:"Services",onClick:function(){return e.switchForm("SERVICE")}},{name:"Authenticate to Service",active:!0}]}),Object(r.jsx)(de,{onSubmit:this.submitAuth})]})})})}}]),n}(s.a.Component),Ge={login:U},Qe=Object(b.f)(Object(l.connect)((function(e){return{user:e.user}}),Ge)(Ze)),ze=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(g.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){!0===e.props.user.anonymous&&e.props.history.push("/login")},e.componentDidUpdate=function(){!1===e.props.user.anonymous&&!1===e.props.user.passwordChanged&&e.props.history.push("/change-password"),!0===e.props.user.anonymous&&e.props.history.push("/login")},e.submitPasswordChange=function(){var t=Object(f.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.changePassword(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(x.a)(n,[{key:"render",value:function(){var e;return(null===(e=this.props.user.meta)||void 0===e?void 0:e.passwordSuccessfullyChanged)&&(this.props.user.meta.passwordSuccessfullyChanged=!1,this.props.history.push("/")),Object(r.jsx)("div",{id:"change-password",className:"m-5",children:!1===this.props.user.anonymous&&Object(r.jsx)(S.l,{children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ie,{crumbs:[{name:"Ohrwurm"},{name:"Change password",active:!0}]}),Object(r.jsx)(me,{username:this.props.user.username,onSubmit:this.submitPasswordChange})]})})})}}]),n}(s.a.Component),Ye={changePassword:function(e){return function(){var t=Object(f.a)(v.a.mark((function t(n,r,a){var s,c,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a.getClientSnek,t.prev=1,n({type:"USER_CHANGE_PASSWORD_REQUEST"}),t.next=5,s().session.runner("mutation",M()(A()),{newPassword:Object(R.sha256)(e)});case 5:if(c=t.sent,c.data,!(i=c.errors)){t.next=10;break}throw new Error(i[0].message);case 10:n({type:"USER_CHANGE_PASSWORD_SUCCESS"}),t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(1),o=n({type:"USER_CHANGE_PASSWORD_FAILURE",payload:{error:{errorCode:999,message:"Password change failed (".concat(t.t0.message,")")},errorDetails:t.t0}}),t.abrupt("return",o);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,n,r){return t.apply(this,arguments)}}()}},Be=Object(b.f)(Object(l.connect)((function(e){return{user:e.user}}),Ye)(ze)),Je=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return Object(r.jsxs)(b.c,{children:[Object(r.jsx)(b.a,{exact:!0,path:"/",component:function(){return Object(r.jsx)(We,{})}}),Object(r.jsx)(b.a,{exact:!0,path:"/members",component:function(){return Object(r.jsx)(Le,{})}}),Object(r.jsx)(b.a,{exact:!0,path:"/login",component:function(){return Object(r.jsx)(Qe,{})}}),Object(r.jsx)(b.a,{exact:!0,path:"/change-password",component:function(){return Object(r.jsx)(Be,{})}})]})}}]),n}(s.a.Component),$e=Object(b.f)(Object(l.connect)((function(e){return{user:e.user}}),(function(e){return{}}))(Je)),Xe=Object(b.f)((function(){var e=Object(l.useDispatch)();return Object(a.useEffect)((function(){e(U())}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(_,{}),Object(r.jsx)("div",{className:"flyout",children:Object(r.jsx)("main",{children:Object(r.jsx)($e,{})})})]})})),Ve={anonymous:void 0,passwordChanged:void 0,username:void 0,meta:{passwordSuccessfullyChanged:!1},error:void 0,errorDetails:void 0},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"USER_LOGIN_REQUEST":return e;case"USER_LOGIN_SUCCESS":return{username:null===r||void 0===r?void 0:r.username,isOhrwurmSupervisor:null===r||void 0===r?void 0:r.isOhrwurmSupervisor,passwordChanged:null===r||void 0===r?void 0:r.passwordChanged,anonymous:null===r||void 0===r?void 0:r.anonymous};case"USER_LOGIN_FAILURE":return Object(P.a)({},Ve);case"USER_LOGOUT_REQUEST":return e;case"USER_LOGOUT_SUCCESS":return{anonymous:!0,isOhrwurmSupervisor:void 0,passwordChanged:void 0,username:void 0};case"USER_LOGOUT_FAILURE":return Object(P.a)(Object(P.a)({},Ve),{},{error:null===r||void 0===r?void 0:r.error,errorDetails:null===r||void 0===r?void 0:r.errorDetails});case"USER_CHANGE_PASSWORD_REQUEST":return e;case"USER_CHANGE_PASSWORD_SUCCESS":return Object(P.a)(Object(P.a)({},e),{},{passwordChanged:!0,meta:{passwordSuccessfullyChanged:!0}});case"USER_CHANGE_PASSWORD_FAILURE":return Object(P.a)(Object(P.a)({},e),{},{error:null===r||void 0===r?void 0:r.error,errorDetails:null===r||void 0===r?void 0:r.errorDetails});default:return e}},qe={pacs:void 0,tracks:void 0,members:void 0,error:void 0,errorDetails:void 0},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"OHRWURM_FETCH_PACS_REQUEST":case"OHRWURM_ADD_PAC_REQUEST":case"OHRWURM_DELETE_PAC_REQUEST":case"OHRWURM_UPDATE_PAC_REQUEST":return e;case"OHRWURM_FETCH_PACS_SUCCESS":case"OHRWURM_ADD_PAC_SUCCESS":case"OHRWURM_DELETE_PAC_SUCCESS":case"OHRWURM_UPDATE_PAC_SUCCESS":return Object(P.a)(Object(P.a)({},e),{},{pacs:null===r||void 0===r?void 0:r.pacs});case"OHRWURM_FETCH_PACS_FAILURE":case"OHRWURM_ADD_PAC_FAILURE":case"OHRWURM_DELETE_PAC_FAILURE":case"OHRWURM_UPDATE_PAC_FAILURE":return Object(P.a)(Object(P.a)({},qe),{},{error:null===r||void 0===r?void 0:r.error,errorDetails:null===r||void 0===r?void 0:r.errorDetails});case"OHRWURM_FETCH_TRACKS_REQUEST":case"OHRWURM_ADD_TRACK_REQUEST":case"OHRWURM_DELETE_TRACK_REQUEST":case"OHRWURM_UPDATE_TRACK_REQUEST":return e;case"OHRWURM_FETCH_TRACKS_SUCCESS":case"OHRWURM_ADD_TRACK_SUCCESS":case"OHRWURM_DELETE_TRACK_SUCCESS":case"OHRWURM_UPDATE_TRACK_SUCCESS":return Object(P.a)(Object(P.a)({},e),{},{tracks:null===r||void 0===r?void 0:r.tracks});case"OHRWURM_FETCH_TRACKS_FAILURE":case"OHRWURM_ADD_TRACK_FAILURE":case"OHRWURM_DELETE_TRACK_FAILURE":case"OHRWURM_UPDATE_TRACK_FAILURE":return Object(P.a)(Object(P.a)({},qe),{},{error:null===r||void 0===r?void 0:r.error,errorDetails:null===r||void 0===r?void 0:r.errorDetails});case"OHRWURM_FETCH_MEMBERS_REQUEST":case"OHRWURM_ADD_MEMBER_REQUEST":case"OHRWURM_DELETE_MEMBER_REQUEST":case"OHRWURM_UPDATE_MEMBER_REQUEST":return e;case"OHRWURM_FETCH_MEMBERS_SUCCESS":case"OHRWURM_ADD_MEMBER_SUCCESS":case"OHRWURM_DELETE_MEMBER_SUCCESS":case"OHRWURM_UPDATE_MEMBER_SUCCESS":return Object(P.a)(Object(P.a)({},e),{},{members:null===r||void 0===r?void 0:r.members});case"OHRWURM_FETCH_MEMBERS_FAILURE":case"OHRWURM_ADD_MEMBER_FAILURE":case"OHRWURM_DELETE_MEMBER_FAILURE":case"OHRWURM_UPDATE_MEMBER_FAILURE":return Object(P.a)(Object(P.a)({},qe),{},{error:null===r||void 0===r?void 0:r.error,errorDetails:null===r||void 0===r?void 0:r.errorDetails});default:return e}},tt=Object(u.combineReducers)({loadingBar:p.loadingBarReducer,user:Ke,ohrwurm:et});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var nt=window.localStorage.getItem("ohrwurm_service_index"),rt=nt?parseInt(nt):0,at=Object(d.composeWithDevTools)({})(Object(u.applyMiddleware)(Object(p.loadingBarMiddleware)(),m.a.withExtraArgument({getClientSnek:function(){return new h.SnekClient(j.ohrwurm[rt].url)}}))),st=Object(u.createStore)(tt,at);i.a.render(Object(r.jsx)(l.Provider,{store:st,children:Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(o.a,{children:Object(r.jsx)(Xe,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[506,1,2]]]);
//# sourceMappingURL=main.1d93765b.chunk.js.map