{"version":3,"sources":["store/actions/userActions.ts","components/organisms/Navbar/index.tsx","assets/logo.png","store/actions/ohrwurmActions.ts","components/atoms/Breadcrumbs/index.tsx","components/atoms/Mailto/index.tsx","components/atoms/ScrollToTop/index.ts","components/molecules/Login/index.tsx","components/molecules/PasswordChange/index.tsx","components/molecules/ServiceGroup/index.tsx","components/molecules/tables/ProjectTable/index.tsx","components/molecules/tables/TrackTable/index.tsx","components/molecules/tables/MemberTable/index.tsx","components/organisms/modals/ProjectModal/index.tsx","components/organisms/modals/MemberModal/index.tsx","components/organisms/modals/TrackModal/index.tsx","components/organisms/services/ohrwurm/index.tsx","components/pages/ohrwurm/index.tsx","components/pages/ohrwurm/MemberPage/index.tsx","components/pages/LoginPage/index.tsx","components/pages/PasswordChangePage/index.tsx","Routes.tsx","App.tsx","store/reducers/userReducers.ts","store/reducers/ohrwurmReducers.ts","store/reducers/index.ts","serviceWorker.ts","index.tsx"],"names":["loginAction","user","dispatch","getState","a","getClientSnek","type","password","sha256","session","begin","whoami","anonymous","__typename","runner","gql","then","data","errors","Error","me","passwordChanged","isOhrwurmSupervisor","payload","username","error","message","errorDetails","serializeError","Navbar","state","isOpen","toggleCollapse","setState","this","props","logout","color","dark","expand","src","alt","onClick","id","navbar","right","nav","caret","hidden","icon","history","push","href","React","Component","mapDispatchToProps","end","result","errorCode","withRouter","connect","paginationQueryFragment","memberQueryFragment","pacQueryFragment","trackQueryFragment","trackAddFragment","fetchPACSAction","searchQuery","query","variables","pacs","pagination","nextPage","projectAudioChannels","total","items","fetchPACTracksAction","pacId","pac","tracks","fetchMembersAction","dataSheet","members","ohrwurmMembers","Breadcrumbs","crumbs","map","e","index","active","name","undefined","Mailto","email","subject","body","children","className","encodeURIComponent","ScrollToTop","prevProps","location","window","scrollTo","LoginForm","useState","setUsername","setPassword","md","label","group","validate","value","onChange","target","containerClass","alert","onSubmit","PasswordChangeForm","confirmPassword","validPassword","submitHandler","event","preventDefault","changeHandler","noValidate","required","ServiceGroup","activeItemIndex","setActiveItemIndex","entries","hover","title","ProjectTable","generateRows","description","columns","selector","sortable","grow","cell","modify","onEditClick","divider","onDeleteClick","allowOverflow","button","width","prevState","rows","noHeader","selectableRows","onRowClicked","highlightOnHover","defaultSortField","overflowY","TrackTable","createdAt","tags","attendees","transcript","audioFileUrl","moment","calendar","tag","pill","significance","toLowerCase","attendee","url","height","playing","controls","disabled","onTranscriptClick","download","MemberTable","ProjectModal","channelId","editing","filteredMembers","componentWillMount","selectedProjectIndex","ohrwurm","find","member","setProjectName","currentTarget","setChannelId","setDescription","setMembers","includes","filter","f","search","updateTrack","addTrack","toggle","checkChecked","size","hint","toString","checked","rounded","fetchPACS","fetchPACTracks","MemberModal","setSupervisor","setProjects","updateMember","addMember","added","generatedPassword","TrackModal","loading","Date","audioFile","track","toUpperCase","setTrackName","setDate","onDrop","files","attendeesList","propsAttendeesList","JSON","stringify","material","animated","format","accept","getRootProps","getInputProps","acceptedFiles","length","i","placeholder","editable","readOnly","Ohrwurm","activeTable","showTranscriptModal","transcriptTitle","transcriptText","editingProject","projectModal","trackModal","selectedTrack","componentDidMount","fetchMember","switchTable","table","selectProject","deleteProject","deletePAC","editProject","toggleProjectModal","selectTrack","toggleTranscriptModal","toggleTrackModal","deleteTrack","editTrack","input","flat","fullHeight","position","substring","noClick","multiple","addPAC","updatePAC","concat","elem","findIndex","item","slice","createAt","addPac","updatePac","OhrwurmPage","MemberPage","memberModal","fetchMembers","deleteUser","deleteMember","editUser","toggleMemberModal","login","addOhrwurmMember","updateOhrwurmMember","LoginPage","activeForm","componentDidUpdate","switchForm","form","submitService","serviceIndex","localStorage","setItem","submitAuth","Services","Login","PasswordChangePage","submitPasswordChange","newPassword","changePassword","meta","passwordSuccessfullyChanged","PasswordChange","Routes","exact","path","component","useDispatch","useEffect","INIT_STATE","userReducer","action","ohrwurmReducer","rootReducer","combineReducers","loadingBar","loadingBarReducer","userReducers","Boolean","hostname","match","getItem","SERVICE_INDEX","parseInt","enhancer","composeWithDevTools","composeEnhancers","applyMiddleware","loadingBarMiddleware","thunk","withExtraArgument","SnekClient","STORE","createStore","ReactDOM","render","store","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console"],"mappings":"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","file":"static/js/main.1d93765b.chunk.js","sourcesContent":["//#region > Imports\r\n//> Additional\r\n// SHA hashing algorithm\r\nimport { sha256 } from \"js-sha256\";\r\n//> Error Serialization\r\n// Serialize/deserialize an error into a plain object\r\nimport { serializeError } from \"serialize-error\";\r\n//> Redux\r\nimport { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\n//> GQL\r\n// DocumentNode needed for queries\r\nimport gql from \"graphql-tag\";\r\n\r\n//> Action Types\r\nimport { RootState } from \"../reducers/index\";\r\nimport { SnekClient, LoginAction } from \"../types\";\r\n//#endregion,\r\n\r\n//#region > Types\r\ntype loginArguments = {\r\n  getClientSnek: () => SnekClient;\r\n};\r\n//#endregion\r\n\r\n//#region > User Actions\r\nconst loginAction = (user?: {\r\n  username: string;\r\n  password: string;\r\n}): ThunkAction<void, RootState, loginArguments, LoginAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, loginArguments, LoginAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    dispatch({ type: \"USER_LOGIN_REQUEST\" });\r\n\r\n    try {\r\n      if (user?.password) {\r\n        user.password = sha256(user.password);\r\n      }\r\n\r\n      // Type any because .session.begin() does not return the correct type\r\n      const whoami = (await getClientSnek().session.begin(user)) as any;\r\n\r\n      if (!whoami?.anonymous && whoami?.__typename === \"SNEKUser\") {\r\n        // Extra whoami request because .session.begin() does not support\r\n        // passwordChanged return value\r\n        const { passwordChanged, isOhrwurmSupervisor } = await getClientSnek()\r\n          .session.runner<{\r\n            me: {\r\n              passwordChanged: boolean;\r\n              isOhrwurmSupervisor: boolean;\r\n            };\r\n          }>(\r\n            \"query\",\r\n            gql`\r\n              query whoami($token: String!) {\r\n                me(token: $token) {\r\n                  passwordChanged\r\n                  isOhrwurmSupervisor\r\n                }\r\n              }\r\n            `,\r\n            {}\r\n          )\r\n          .then(({ data, errors }) => {\r\n            if (!data || errors) {\r\n              throw Error(\"Login failed\");\r\n            }\r\n            return data.me;\r\n          });\r\n\r\n        dispatch({\r\n          type: \"USER_LOGIN_SUCCESS\",\r\n          payload: {\r\n            username: whoami.username,\r\n            passwordChanged: passwordChanged,\r\n            isOhrwurmSupervisor: isOhrwurmSupervisor,\r\n            anonymous: false,\r\n          },\r\n        });\r\n      } else if (whoami.anonymous) {\r\n        dispatch({\r\n          type: \"USER_LOGIN_SUCCESS\",\r\n          payload: {\r\n            anonymous: true,\r\n          },\r\n        });\r\n      } else {\r\n        throw Error(\"Login failed\");\r\n      }\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"USER_LOGIN_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            message: \"Login failed\",\r\n          },\r\n          errorDetails: serializeError(ex),\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Logout user.\r\n *\r\n * @description Handles the logging out of active users\r\n */\r\nconst logoutAction = (): ThunkAction<\r\n  void,\r\n  RootState,\r\n  loginArguments,\r\n  LoginAction\r\n> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, loginArguments, LoginAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      dispatch({ type: \"USER_LOGOUT_REQUEST\" });\r\n\r\n      await getClientSnek().session.end();\r\n\r\n      dispatch({ type: \"USER_LOGOUT_SUCCESS\" });\r\n    } catch (ex) {\r\n      let result = dispatch({\r\n        type: \"USER_LOGOUT_FAILURE\",\r\n        payload: {\r\n          errorCode: 601,\r\n          message: \"Logout failed\",\r\n          error: ex,\r\n        },\r\n      });\r\n\r\n      return result;\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Change user password\r\n *\r\n * @param newPassword\r\n */\r\nconst changePasswordAction = (\r\n  newPassword: string\r\n): ThunkAction<void, RootState, loginArguments, LoginAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, loginArguments, LoginAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      dispatch({ type: \"USER_CHANGE_PASSWORD_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        me: {\r\n          passwordChanged: boolean;\r\n        };\r\n      }>(\r\n        \"mutation\",\r\n        gql`\r\n          mutation changePassword($token: String!, $newPassword: String!) {\r\n            changePassword(token: $token, newPassword: $newPassword) {\r\n              success\r\n            }\r\n          }\r\n        `,\r\n        { newPassword: sha256(newPassword) }\r\n      );\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      dispatch({ type: \"USER_CHANGE_PASSWORD_SUCCESS\" });\r\n    } catch (ex) {\r\n      let result = dispatch({\r\n        type: \"USER_CHANGE_PASSWORD_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Password change failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n\r\n      return result;\r\n    }\r\n  };\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport { loginAction, logoutAction, changePasswordAction };\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBNavbar,\r\n  MDBNavbarBrand,\r\n  MDBNavbarNav,\r\n  MDBNavItem,\r\n  MDBNavbarToggler,\r\n  MDBCollapse,\r\n  MDBDropdown,\r\n  MDBDropdownToggle,\r\n  MDBDropdownMenu,\r\n  MDBDropdownItem,\r\n  MDBIcon,\r\n} from \"mdbreact\";\r\n//> Redux\r\nimport { connect } from \"react-redux\";\r\n\r\n//> Store Types\r\nimport { RootState } from \"../../../store/reducers/index\";\r\nimport { UserState } from \"../../../store/types\";\r\n//> Store Actions\r\nimport { logoutAction } from \"../../../store/actions/userActions\";\r\n//> Style Sheet\r\nimport \"./indes.scss\";\r\n//> Logo\r\nimport logo from \"../../../assets/logo.png\";\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface State {\r\n  isOpen: boolean;\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n  user: UserState;\r\n}\r\ninterface DispatchProps {\r\n  logout: () => void;\r\n}\r\ninterface Props\r\n  extends OwnProps,\r\n    StateProps,\r\n    DispatchProps,\r\n    RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Components\r\nclass Navbar extends React.Component<Props, State> {\r\n  state: State = {\r\n    isOpen: false,\r\n  };\r\n\r\n  toggleCollapse = () => {\r\n    this.setState({ isOpen: !this.state.isOpen });\r\n  };\r\n\r\n  async logout() {\r\n    this.props.logout();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MDBNavbar color=\"default-color\" dark expand=\"md\">\r\n        <MDBNavbarBrand>\r\n          <>\r\n            <img src={logo} alt=\"Logo\"></img>\r\n          </>\r\n        </MDBNavbarBrand>\r\n        <MDBNavbarToggler onClick={this.toggleCollapse} />\r\n        <MDBCollapse id=\"navbarCollapse3\" isOpen={this.state.isOpen} navbar>\r\n          <MDBNavbarNav right>\r\n            <MDBNavItem>\r\n              <MDBDropdown>\r\n                <MDBDropdownToggle\r\n                  nav\r\n                  caret\r\n                  hidden={this.props.user.anonymous !== false}\r\n                >\r\n                  <MDBIcon icon=\"user\" />\r\n                </MDBDropdownToggle>\r\n                <MDBDropdownMenu right>\r\n                  <MDBDropdownItem\r\n                    hidden={!this.props.user.isOhrwurmSupervisor}\r\n                    onClick={() => this.props.history.push(\"/members\")}\r\n                  >\r\n                    Members\r\n                  </MDBDropdownItem>\r\n                  <MDBDropdownItem\r\n                    onClick={() => this.props.history.push(\"/change-password\")}\r\n                  >\r\n                    Change password\r\n                  </MDBDropdownItem>\r\n                  <MDBDropdownItem href=\"#\" onClick={() => this.logout()}>\r\n                    Logout\r\n                  </MDBDropdownItem>\r\n                </MDBDropdownMenu>\r\n              </MDBDropdown>\r\n            </MDBNavItem>\r\n          </MDBNavbarNav>\r\n        </MDBCollapse>\r\n      </MDBNavbar>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Redux Mapping\r\nconst mapStateToProps = (state: RootState) => ({ user: state.user });\r\n\r\nconst mapDispatchToProps = {\r\n  logout: logoutAction,\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\n/**\r\n * Provides its connected component with the pieces of the data it needs from\r\n * the store, and the functions it can use to dispatch actions to the store.\r\n *\r\n * Got access to the history object’s properties and the closest\r\n * <Route>'s match.\r\n */\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Navbar));\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAMDWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTEyLTIzVDIwOjA0OjM0KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTAxLTE2VDE3OjU1OjIwKzAxOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wMS0xNlQxNzo1NToyMCswMTowMCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0ZTgxNDQyZC05Yzc4LTgyNDctOGI0NC05NzI2ZmUzNDM0YmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo5ZmVmZjUxMS0zZDI5LTRkNDYtODdhMi0zNGE2Y2UwZDEwMDIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpmNmQ5ZTUwZS1lODMwLTkzNGYtYWExYS01OWE2OTQzNDQ1NTciIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iNzIwMDAwLzEwMDAwIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMjAwMCIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwMDAiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT54bXAuZGlkOmRiN2M0ODg2LTM5ZGUtYjQ0OS04ZTExLTk4MDU1ZDcwODEyZjwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmY2ZDllNTBlLWU4MzAtOTM0Zi1hYTFhLTU5YTY5NDM0NDU1NyIgc3RFdnQ6d2hlbj0iMjAxOS0xMi0yM1QyMDowNDozNCswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYzRiMGZmZS1hNjk5LWZjNGMtOTZiNC1iMjZhNmYxYzJkYjgiIHN0RXZ0OndoZW49IjIwMjAtMDEtMDRUMDA6NTI6NDUrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MWZmZjhiZTYtYWEzOC03NTRmLWFlODktOTdlMDhjODc3NjY5IiBzdEV2dDp3aGVuPSIyMDIwLTAxLTExVDIwOjQwOjU1KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjNlMWY1NWNiLTQ0MTQtMTI0ZC04YTk2LWUwZjY2MzY4MDdmYiIgc3RFdnQ6d2hlbj0iMjAyMC0wMS0xMVQyMDo0MDo1NSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0ZTgxNDQyZC05Yzc4LTgyNDctOGI0NC05NzI2ZmUz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\"","//#region > Imports\r\n//> Error Serialization\r\n// Serialize/deserialize an error into a plain object\r\nimport { serializeError } from \"serialize-error\";\r\n//> Redux\r\nimport { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\n//> GQL\r\n// DocumentNode needed for queries\r\nimport gql from \"graphql-tag\";\r\n//> Client\r\nimport { SnekClient } from \"snek-client\";\r\n\r\n//> Store Types\r\nimport { RootState } from \"../reducers/index\";\r\nimport {\r\n  OhrwurmAction,\r\n  Pagination,\r\n  PAC,\r\n  Track,\r\n  TagType,\r\n  Member,\r\n} from \"../types\";\r\n//#endregion\r\n\r\n//#region > Queries\r\nconst paginationQueryFragment = `\r\n  pagination {\r\n    total\r\n    nextPage\r\n  }\r\n`;\r\n\r\nconst memberQueryFragment = `\r\n  id\r\n  username\r\n  isOhrwurmSupervisor\r\n  pacs {\r\n    id\r\n    title\r\n    description\r\n    channelId\r\n  }\r\n`;\r\n\r\nconst pacQueryFragment = `\r\n  id\r\n  title\r\n  description\r\n  channelId\r\n  members {\r\n    ${memberQueryFragment}\r\n  }\r\n`;\r\n\r\nconst trackQueryFragment = `\r\n  id\r\n  title\r\n  createdAt\r\n  audioChannel\r\n  audioCodec\r\n  audioBitrate\r\n  description\r\n  tags {\r\n    ... on TagBlock {\r\n      name\r\n      significance\r\n    }\r\n  }\r\n  attendees {\r\n    ... on AttendeeBlock {\r\n      name\r\n    }\r\n  }\r\n  transcript\r\n  pac {\r\n    ${pacQueryFragment}\r\n  }\r\n  audioFileUrl\r\n`;\r\n\r\nconst trackAddFragment = `\r\n  id\r\n  title\r\n  createdAt\r\n  audioChannel\r\n  audioCodec\r\n  audioBitrate\r\n  description\r\n  transcript\r\n  pac {\r\n    ${pacQueryFragment}\r\n  }\r\n  audioFileUrl\r\n`;\r\n//#endregion\r\n\r\n//#region > Types\r\ntype ohrwurmArguments = {\r\n  getClientSnek: () => SnekClient;\r\n};\r\n//#endregion\r\n\r\n//#region > Ohrwurm PAC Actions\r\nconst fetchPACSAction = (\r\n  searchQuery?: string\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    let query;\r\n    let variables;\r\n\r\n    if (searchQuery) {\r\n      query = gql`\r\n        query allPACS($token: String!, $searchQuery: String!) {\r\n          projectAudioChannels(token: $token, searchQuery: $searchQuery, perPage: 1000, ) {\r\n            ${paginationQueryFragment}\r\n            items{\r\n              ${pacQueryFragment}\r\n            }\r\n          }\r\n        }\r\n      `;\r\n\r\n      variables = { searchQuery };\r\n    } else {\r\n      query = gql`\r\n        query allPACS($token: String!) {\r\n          projectAudioChannels(token: $token, perPage: 1000) {\r\n            ${paginationQueryFragment}\r\n            items{\r\n              ${pacQueryFragment}\r\n            }\r\n          }\r\n        }\r\n      `;\r\n\r\n      variables = {};\r\n    }\r\n\r\n    dispatch({ type: \"OHRWURM_FETCH_PACS_REQUEST\" });\r\n\r\n    const { data, errors } = await getClientSnek().session.runner<{\r\n      projectAudioChannels: {\r\n        pagination: Pagination;\r\n        items: PAC[];\r\n      };\r\n    }>(\"query\", query, variables);\r\n\r\n    if (data) {\r\n      dispatch({\r\n        type: \"OHRWURM_FETCH_PACS_SUCCESS\",\r\n        payload: {\r\n          pacs: {\r\n            pagination: {\r\n              nextPage: data.projectAudioChannels.pagination.nextPage,\r\n              total: data.projectAudioChannels.pagination.total,\r\n            },\r\n            items: data.projectAudioChannels.items,\r\n          },\r\n        },\r\n      });\r\n    }\r\n\r\n    if (errors) {\r\n      dispatch({\r\n        type: \"OHRWURM_FETCH_PACS_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            message: \"GraphQL Error\",\r\n          },\r\n          errorDetails: serializeError(errors),\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst addPACAction = (\r\n  title: string,\r\n  description?: string,\r\n  channelId?: string,\r\n  members?: string[]\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      const dataSheet = gql`\r\n        mutation addPAC(\r\n          $token: String!\r\n          $title: String!\r\n          $description: String\r\n          $channelId: String\r\n          $members: [String]\r\n        ) {\r\n          addPac(\r\n            token: $token\r\n            title: $title\r\n            description: $description\r\n            channelId: $channelId\r\n            members: $members\r\n          ) {\r\n            pac {\r\n              ${pacQueryFragment}\r\n            }\r\n          }\r\n        }\r\n      `;\r\n\r\n      dispatch({ type: \"OHRWURM_ADD_PAC_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        addPac: {\r\n          pac: PAC;\r\n        };\r\n      }>(\"mutation\", dataSheet, { title, description, channelId, members });\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      //> add new pac to current pac items\r\n      let pacs = getState().ohrwurm.pacs;\r\n\r\n      if (!pacs) {\r\n        pacs = { pagination: { total: 0, nextPage: 0 }, items: [] };\r\n      }\r\n\r\n      if (data) {\r\n        const items = pacs.items.concat({\r\n          id: data.addPac.pac.id,\r\n          title,\r\n          description,\r\n          channelId,\r\n          members: data.addPac.pac.members,\r\n        });\r\n\r\n        pacs.items = items;\r\n      }\r\n\r\n      dispatch({\r\n        type: \"OHRWURM_ADD_PAC_SUCCESS\",\r\n        payload: {\r\n          pacs,\r\n        },\r\n      });\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_ADD_PAC_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Adding PAC failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst deletePACAction = (\r\n  id: string\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      const dataSheet = gql`\r\n        mutation deletePAC($token: String!, $id: ID!) {\r\n          deletePac(token: $token, id: $id) {\r\n            success\r\n          }\r\n        }\r\n      `;\r\n\r\n      dispatch({ type: \"OHRWURM_DELETE_PAC_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        deletePAC: { success: string };\r\n      }>(\"mutation\", dataSheet, { id });\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      //> add new pac to current pac items\r\n      let pacs = getState().ohrwurm.pacs;\r\n\r\n      if (!pacs) {\r\n        pacs = { pagination: { total: 0, nextPage: 0 }, items: [] };\r\n      }\r\n\r\n      pacs.items = pacs.items.filter((elem) => elem.id !== id);\r\n\r\n      dispatch({\r\n        type: \"OHRWURM_DELETE_PAC_SUCCESS\",\r\n        payload: {\r\n          pacs,\r\n        },\r\n      });\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_DELETE_PAC_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Deleting PAC failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst updatePACAction = (\r\n  id: string,\r\n  title?: string,\r\n  description?: string,\r\n  channelId?: string,\r\n  members?: string[]\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      const dataSheet = gql`\r\n        mutation updatePAC(\r\n          $token: String!\r\n          $id: ID!\r\n          $title: String\r\n          $description: String\r\n          $channelId: String\r\n          $members: [String]\r\n        ) {\r\n          updatePac(\r\n            token: $token\r\n            id: $id\r\n            title: $title\r\n            description: $description\r\n            channelId: $channelId\r\n            members: $members\r\n          ) {\r\n            pac {\r\n              ${pacQueryFragment}\r\n            }\r\n          }\r\n        }\r\n      `;\r\n\r\n      dispatch({ type: \"OHRWURM_UPDATE_PAC_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        updatePac: {\r\n          pac: PAC;\r\n        };\r\n      }>(\"mutation\", dataSheet, { id, title, description, channelId, members });\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      //> add new pac to current pac items\r\n      let pacs = getState().ohrwurm.pacs;\r\n\r\n      if (pacs && data) {\r\n        const index = pacs.items.findIndex((item) => item.id === id);\r\n\r\n        const items = [\r\n          ...pacs.items.slice(0, index),\r\n          data.updatePac.pac,\r\n          ...pacs.items.slice(index + 1),\r\n        ];\r\n\r\n        pacs.items = [...items];\r\n      }\r\n\r\n      dispatch({\r\n        type: \"OHRWURM_UPDATE_PAC_SUCCESS\",\r\n        payload: {\r\n          pacs,\r\n        },\r\n      });\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_UPDATE_PAC_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Updating PAC failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n//#endregion\r\n\r\n//#region > Ohrwurm Track Actions\r\nconst fetchPACTracksAction = (\r\n  pacId: string,\r\n  searchQuery?: string\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      let query;\r\n      let variables;\r\n\r\n      if (searchQuery) {\r\n        query = gql`\r\n          query allPACTracks($token: String!, $searchQuery: String!, $pac: ID!) {\r\n            tracks(token: $token, searchQuery: $searchQuery, perPage: 1000, pac: $pac) {\r\n              ${paginationQueryFragment}\r\n              items{\r\n                ${trackQueryFragment}\r\n              }\r\n            }\r\n          }\r\n        `;\r\n\r\n        variables = { pac: pacId, searchQuery };\r\n      } else {\r\n        query = gql`\r\n          query allPACTracks($token: String!, $pac: ID!) {\r\n            tracks(token: $token, perPage: 1000, pac: $pac) {\r\n              ${paginationQueryFragment}\r\n              items{\r\n                ${trackQueryFragment}\r\n              }\r\n            }\r\n          }  \r\n        `;\r\n\r\n        variables = { pac: pacId };\r\n      }\r\n\r\n      dispatch({ type: \"OHRWURM_FETCH_TRACKS_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        tracks: {\r\n          pagination: Pagination;\r\n          items: Track[];\r\n        };\r\n      }>(\"query\", query, variables);\r\n\r\n      if (data) {\r\n        dispatch({\r\n          type: \"OHRWURM_FETCH_TRACKS_SUCCESS\",\r\n          payload: {\r\n            tracks: {\r\n              pagination: {\r\n                nextPage: data.tracks.pagination.nextPage,\r\n                total: data.tracks.pagination.total,\r\n              },\r\n              pacId: pacId,\r\n              items: data.tracks.items,\r\n            },\r\n          },\r\n        });\r\n      }\r\n\r\n      if (errors) {\r\n        dispatch({\r\n          type: \"OHRWURM_FETCH_TRACKS_FAILURE\",\r\n          payload: {\r\n            error: {\r\n              message: \"GraphQL Error\",\r\n            },\r\n            errorDetails: serializeError(errors),\r\n          },\r\n        });\r\n      }\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_FETCH_TRACKS_FAILURE\",\r\n        payload: {\r\n          errorDetails: serializeError(ex),\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst addTrackAction = (\r\n  pacId: string,\r\n  title: string,\r\n  attendees?: { name: string }[],\r\n  audioFile?: File,\r\n  createdAt?: Date,\r\n  description?: string,\r\n  tags?: TagType[]\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      const dataSheet = gql`\r\n        mutation addTrack(\r\n          $token: String!\r\n          $pacId: ID!\r\n          $title: String!\r\n          $attendees: [AttendeeType]\r\n          $audioFile: Upload\r\n          $createdAt: DateTime\r\n          $description: String\r\n          $tags: [TagType]\r\n        ) {\r\n          addTrack(\r\n            token: $token\r\n            pacId: $pacId\r\n            title: $title\r\n            attendees: $attendees\r\n            audioFile: $audioFile\r\n            createdAt: $createdAt\r\n            description: $description\r\n            tags: $tags\r\n          ) {\r\n            track {\r\n              ${trackAddFragment}\r\n            }\r\n          }\r\n        }\r\n      `;\r\n\r\n      dispatch({ type: \"OHRWURM_ADD_TRACK_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        addTrack: {\r\n          track: Track;\r\n        };\r\n      }>(\"mutation\", dataSheet, {\r\n        pacId,\r\n        title,\r\n        attendees,\r\n        audioFile,\r\n        createdAt,\r\n        description,\r\n        tags,\r\n      });\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      //> add new track to current track items\r\n      let tracks = getState().ohrwurm.tracks;\r\n\r\n      if (!tracks) {\r\n        tracks = {\r\n          pacId: \"0\",\r\n          pagination: { total: 0, nextPage: 0 },\r\n          items: [],\r\n        };\r\n      }\r\n\r\n      if (data) {\r\n        const items = tracks.items?.concat({\r\n          id: data.addTrack.track.id,\r\n          title,\r\n          attendees,\r\n          audioFile,\r\n          createdAt,\r\n          description,\r\n          tags,\r\n          audioFileUrl: data.addTrack.track.audioFileUrl,\r\n          transcript: data.addTrack.track.transcript,\r\n          pac: data.addTrack.track.pac,\r\n        });\r\n\r\n        tracks.items = items;\r\n      }\r\n\r\n      dispatch({\r\n        type: \"OHRWURM_ADD_TRACK_SUCCESS\",\r\n        payload: {\r\n          tracks,\r\n        },\r\n      });\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_ADD_TRACK_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Adding Track failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst deleteTrackAction = (\r\n  id: string\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      const dataSheet = gql`\r\n        mutation deleteTrack($token: String, $id: ID!) {\r\n          deleteTrack(token: $token, id: $id) {\r\n            success\r\n          }\r\n        }\r\n      `;\r\n\r\n      dispatch({ type: \"OHRWURM_DELETE_TRACK_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        deleteTrack: { success: string };\r\n      }>(\"mutation\", dataSheet, { id });\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      //> add new track to current track items\r\n      let tracks = getState().ohrwurm.tracks;\r\n\r\n      if (!tracks) {\r\n        tracks = {\r\n          pacId: \"0\",\r\n          pagination: { total: 0, nextPage: 0 },\r\n          items: [],\r\n        };\r\n      }\r\n\r\n      if (data) {\r\n        const items = tracks.items?.filter((elem) => elem.id.toString() !== id);\r\n\r\n        tracks.items = items;\r\n      }\r\n\r\n      dispatch({\r\n        type: \"OHRWURM_DELETE_TRACK_SUCCESS\",\r\n        payload: {\r\n          tracks,\r\n        },\r\n      });\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_DELETE_TRACK_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Deleting Track failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst updateTrackAction = (\r\n  id: string,\r\n  title?: string,\r\n  attendees?: { name: string }[],\r\n  description?: string,\r\n  tags?: TagType[]\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      const dataSheet = gql`\r\n        mutation updateTrack(\r\n          $token: String!\r\n          $id: ID!\r\n          $title: String\r\n          $attendees: [AttendeeType]\r\n          $description: String\r\n          $tags: [TagType]\r\n        ) {\r\n          updateTrack(\r\n            token: $token\r\n            id: $id\r\n            title: $title\r\n            attendees: $attendees\r\n            description: $description\r\n            tags: $tags\r\n          ) {\r\n            track {\r\n              ${trackAddFragment}\r\n            }\r\n          }\r\n        }\r\n      `;\r\n\r\n      dispatch({ type: \"OHRWURM_UPDATE_TRACK_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        updateTrack: {\r\n          track: Track;\r\n        };\r\n      }>(\"mutation\", dataSheet, { id, title, attendees, description, tags });\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      //> add new track to current track items\r\n      let tracks = getState().ohrwurm.tracks;\r\n\r\n      if (tracks?.items && data) {\r\n        const index = tracks.items?.findIndex(\r\n          (item) => item.id.toString() === id\r\n        );\r\n\r\n        const items = [\r\n          ...tracks.items.slice(0, index),\r\n          {\r\n            id: data.updateTrack.track.id,\r\n            title: title || tracks.items[index].title,\r\n            attendees: attendees || tracks.items[index].attendees,\r\n            audioFile: tracks.items[index].audioFile,\r\n            createAt: tracks.items[index].createdAt,\r\n            description: description || tracks.items[index].description,\r\n            tags: tags || tracks.items[index].tags,\r\n            audioFileUrl: tracks.items[index].audioFileUrl,\r\n            transcript: tracks.items[index].transcript,\r\n            pac: tracks.items[index].pac,\r\n          },\r\n          ...tracks.items.slice(index + 1),\r\n        ];\r\n\r\n        tracks.items = [...items];\r\n      }\r\n\r\n      dispatch({\r\n        type: \"OHRWURM_UPDATE_TRACK_SUCCESS\",\r\n        payload: {\r\n          tracks,\r\n        },\r\n      });\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_UPDATE_TRACK_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Updating Track failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n//#endregion\r\n\r\n//#region > Ohrwurm Member Actions\r\nconst fetchMembersAction = (): ThunkAction<\r\n  void,\r\n  RootState,\r\n  ohrwurmArguments,\r\n  OhrwurmAction\r\n> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      const dataSheet = gql`\r\n        query getOhrwurmMembers($token: String!) {\r\n          ohrwurmMembers(token: $token) {\r\n            ${memberQueryFragment}\r\n          }\r\n        }\r\n      `;\r\n\r\n      dispatch({ type: \"OHRWURM_FETCH_MEMBERS_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        ohrwurmMembers: Member[];\r\n      }>(\"mutation\", dataSheet, {});\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      dispatch({\r\n        type: \"OHRWURM_FETCH_MEMBERS_SUCCESS\",\r\n        payload: {\r\n          members: { items: data?.ohrwurmMembers },\r\n        },\r\n      });\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_FETCH_MEMBERS_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Fetching Members failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst addMemberAction = (\r\n  username: string,\r\n  pacs?: string[], // list of pacId\r\n  isOhrwurmSupervisor?: boolean\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      const dataSheet = gql`\r\n        mutation addOhrwurmMember(\r\n          $token: String!\r\n          $username: String!\r\n          $pacs: [ID]\r\n          $isOhrwurmSupervisor: Boolean\r\n        ) {\r\n          addOhrwurmMember(\r\n            token: $token\r\n            username: $username\r\n            pacs: $pacs\r\n            isOhrwurmSupervisor: $isOhrwurmSupervisor\r\n          ) {\r\n            member {\r\n              ${memberQueryFragment}\r\n            }\r\n            generatedPassword\r\n          }\r\n        }\r\n      `;\r\n      dispatch({ type: \"OHRWURM_ADD_MEMBER_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        addOhrwurmMember: {\r\n          member: Member;\r\n          generatedPassword: string;\r\n        };\r\n      }>(\"mutation\", dataSheet, { username, pacs, isOhrwurmSupervisor });\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      //> add new pac to current pac items\r\n      let members = getState().ohrwurm.members;\r\n\r\n      if (!members) {\r\n        members = { items: [] };\r\n      }\r\n\r\n      if (data) {\r\n        members.items?.push(data.addOhrwurmMember.member);\r\n\r\n        members.added = {\r\n          username: data.addOhrwurmMember.member.username,\r\n          generatedPassword: data.addOhrwurmMember.generatedPassword,\r\n        };\r\n      }\r\n\r\n      dispatch({\r\n        type: \"OHRWURM_ADD_PAC_SUCCESS\",\r\n        payload: {\r\n          members,\r\n        },\r\n      });\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_ADD_PAC_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Adding Member failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst deleteMemberAction = (\r\n  username: string\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      const dataSheet = gql`\r\n        mutation deleteOhrwurmMember($token: String!, $username: String!) {\r\n          deleteOhrwurmMember(token: $token, username: $username) {\r\n            success\r\n          }\r\n        }\r\n      `;\r\n\r\n      dispatch({ type: \"OHRWURM_DELETE_MEMBER_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        deletePAC: { success: string };\r\n      }>(\"mutation\", dataSheet, { username });\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      //> add new pac to current pac items\r\n      let members = getState().ohrwurm.members;\r\n\r\n      if (!members) {\r\n        members = { items: [] };\r\n      }\r\n\r\n      if (data) {\r\n        members.items = members.items?.filter(\r\n          (elem) => elem.username !== username\r\n        );\r\n      }\r\n\r\n      dispatch({\r\n        type: \"OHRWURM_DELETE_MEMBER_SUCCESS\",\r\n        payload: {\r\n          members,\r\n        },\r\n      });\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_DELETE_MEMBER_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Deleting Member failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nconst updateMemberAction = (\r\n  username: string,\r\n  pacs?: string[], // list of pacId\r\n  isOhrwurmSupervisor?: boolean\r\n): ThunkAction<void, RootState, ohrwurmArguments, OhrwurmAction> => {\r\n  return async (\r\n    dispatch: ThunkDispatch<RootState, ohrwurmArguments, OhrwurmAction>,\r\n    getState,\r\n    { getClientSnek }\r\n  ) => {\r\n    try {\r\n      const dataSheet = gql`\r\n        mutation updateOhrwurmMember(\r\n          $token: String!\r\n          $username: String!\r\n          $pacs: [ID]\r\n          $isOhrwurmSupervisor: Boolean\r\n        ) {\r\n          updateOhrwurmMember(\r\n            token: $token\r\n            username: $username\r\n            pacs: $pacs\r\n            isOhrwurmSupervisor: $isOhrwurmSupervisor\r\n          ) {\r\n            member {\r\n              ${memberQueryFragment}\r\n            }\r\n          }\r\n        }\r\n      `;\r\n\r\n      dispatch({ type: \"OHRWURM_UPDATE_MEMBER_REQUEST\" });\r\n\r\n      const { data, errors } = await getClientSnek().session.runner<{\r\n        updateOhrwurmMember: {\r\n          member: Member;\r\n        };\r\n      }>(\"mutation\", dataSheet, { username, pacs, isOhrwurmSupervisor });\r\n\r\n      if (errors) {\r\n        throw new Error(errors[0].message);\r\n      }\r\n\r\n      //> add new pac to current pac items\r\n      let members = getState().ohrwurm.members;\r\n\r\n      if (members?.items && data) {\r\n        const index = members.items?.findIndex(\r\n          (item) => item.username === username\r\n        );\r\n\r\n        const items = [\r\n          ...members.items.slice(0, index),\r\n          data.updateOhrwurmMember.member,\r\n          ...members.items.slice(index + 1),\r\n        ];\r\n\r\n        members.items = [...items];\r\n      }\r\n\r\n      dispatch({\r\n        type: \"OHRWURM_UPDATE_MEMBER_SUCCESS\",\r\n        payload: {\r\n          members,\r\n        },\r\n      });\r\n    } catch (ex) {\r\n      dispatch({\r\n        type: \"OHRWURM_UPDATE_MEMBER_FAILURE\",\r\n        payload: {\r\n          error: {\r\n            errorCode: 999,\r\n            message: `Updating Member failed (${ex.message})`,\r\n          },\r\n          errorDetails: ex,\r\n        },\r\n      });\r\n    }\r\n  };\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport {\r\n  fetchPACSAction,\r\n  fetchPACTracksAction,\r\n  addTrackAction,\r\n  deleteTrackAction,\r\n  updateTrackAction,\r\n  addPACAction,\r\n  deletePACAction,\r\n  updatePACAction,\r\n  fetchMembersAction,\r\n  addMemberAction,\r\n  deleteMemberAction,\r\n  updateMemberAction,\r\n};\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBBreadcrumb, MDBBreadcrumbItem } from \"mdbreact\";\r\n\r\n//> Stylesheet\r\nimport \"./breadcrumbs.scss\";\r\n//#endregion\r\n\r\n//#region > Components\r\nconst Breadcrumbs = (props: {\r\n  crumbs: { name: string; active?: boolean; onClick?: () => void }[];\r\n}) => {\r\n  return (\r\n    <MDBBreadcrumb>\r\n      {props.crumbs.map((e, index) =>\r\n        !e.active ? (\r\n          <MDBBreadcrumbItem key={index}>\r\n            <a href=\"#\" onClick={() => (e.onClick ? e.onClick() : undefined)}>\r\n              {e.name}\r\n            </a>\r\n          </MDBBreadcrumbItem>\r\n        ) : (\r\n          <MDBBreadcrumbItem active key={index}>\r\n            {e.name}\r\n          </MDBBreadcrumbItem>\r\n        )\r\n      )}\r\n    </MDBBreadcrumb>\r\n  );\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default Breadcrumbs;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Improts\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n//#endregion\r\n\r\n//#region > Components\r\nconst Mailto = (props: {\r\n  email: string;\r\n  subject: string;\r\n  body: string;\r\n  children: any;\r\n  className?: string;\r\n}) => {\r\n  const { email, subject, body, children, className } = props;\r\n  return (\r\n    <a\r\n      href={`mailto:${email}?subject=${\r\n        encodeURIComponent(subject) || \"\"\r\n      }&body=${encodeURIComponent(body) || \"\"}`}\r\n      className={className}\r\n    >\r\n      {children}\r\n    </a>\r\n  );\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default Mailto;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface Props extends RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Components\r\n/**\r\n * @class ScrollToTop Component\r\n * @description When reloading or switching a page, ReactJS now starts at the\r\n *              top of the page, and no longer on the last position.\r\n */\r\nclass ScrollToTop extends React.Component<Props> {\r\n  componentDidUpdate(prevProps: Props) {\r\n    const { history } = this.props;\r\n    const { location } = history;\r\n\r\n    if (location !== prevProps.location) {\r\n      // Scroll to top of viewport\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return this.props.children;\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Exports\r\n\r\n// Got access to the history object’s properties and the closest\r\n// <Route>'s match.\r\nexport default withRouter(ScrollToTop);\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React, { useState } from \"react\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBContainer,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBBtn,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBInput,\r\n} from \"mdbreact\";\r\n\r\n//> Mailing\r\nimport Mailto from \"../../atoms/Mailto\";\r\n//> Stylesheet\r\nimport \"./login.scss\";\r\n//#endregion\r\n\r\n//#region > Components\r\nconst LoginForm = (props: {\r\n  onSubmit: (username: string, password: string) => void;\r\n}) => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  return (\r\n    <div>\r\n      <MDBContainer>\r\n        <MDBRow className=\"justify-content-center\">\r\n          <MDBCol md=\"6\">\r\n            <MDBCard>\r\n              <MDBCardBody className=\"mx-4 mt-4\">\r\n                <MDBInput\r\n                  id=\"input\"\r\n                  className=\"input-login\"\r\n                  label=\"Your username\"\r\n                  group\r\n                  type=\"text\"\r\n                  validate\r\n                  value={username}\r\n                  onChange={(e: any) => setUsername(e.target.value)}\r\n                />\r\n                <MDBInput\r\n                  className=\"input-login\"\r\n                  label=\"Your password\"\r\n                  group\r\n                  type=\"password\"\r\n                  validate\r\n                  containerClass=\"mb-0\"\r\n                  value={password}\r\n                  onChange={(e: any) => setPassword(e.target.value)}\r\n                />\r\n                <p className=\"font-small grey-text d-flex justify-content-end\">\r\n                  Forgot\r\n                  <a\r\n                    onClick={() => alert(\"Shit happens ¯\\\\_(ツ)_/¯\")}\r\n                    className=\"dark-grey-text font-weight-bold ml-1\"\r\n                  >\r\n                    Password?\r\n                  </a>\r\n                </p>\r\n                <div className=\"text-center mb-4 mt-5\">\r\n                  <MDBBtn\r\n                    color=\"light-green\"\r\n                    type=\"button\"\r\n                    className=\"btn-block z-depth-2 btn-primary\"\r\n                    onClick={() => props.onSubmit(username, password)}\r\n                  >\r\n                    Log in\r\n                  </MDBBtn>\r\n                </div>\r\n                <p className=\"font-small grey-text d-flex justify-content-center\">\r\n                  Don't have an account?\r\n                  <Mailto\r\n                    email=\"foo@bar.baz\"\r\n                    subject=\"Hello & Welcome\"\r\n                    body=\"Hello world!\"\r\n                    className=\"dark-grey-text font-weight-bold ml-1\"\r\n                  >\r\n                    {\" \"}\r\n                    Contact a supervisor\r\n                  </Mailto>\r\n                </p>\r\n              </MDBCardBody>\r\n            </MDBCard>\r\n          </MDBCol>\r\n        </MDBRow>\r\n      </MDBContainer>\r\n    </div>\r\n  );\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default LoginForm;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBContainer,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBBtn,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBInput,\r\n} from \"mdbreact\";\r\n//#endregion\r\n\r\n//#region > Components\r\nclass PasswordChangeForm extends React.Component<\r\n  {\r\n    username: string | undefined;\r\n    onSubmit: (newPassword: string) => void;\r\n  },\r\n  {}\r\n> {\r\n  state = {\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n  };\r\n\r\n  validPassword = () => {\r\n    return (\r\n      this.state.password !== \"\" &&\r\n      this.state.confirmPassword !== \"\" &&\r\n      this.state.password === this.state.confirmPassword\r\n    );\r\n  };\r\n\r\n  submitHandler = (event: any) => {\r\n    event.preventDefault();\r\n    event.target.className += \" was-validated\";\r\n\r\n    if (this.validPassword()) {\r\n      this.props.onSubmit(this.state.password);\r\n    }\r\n  };\r\n\r\n  changeHandler = (event: any) => {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <form\r\n          className=\"needs-validation\"\r\n          onSubmit={this.submitHandler}\r\n          noValidate\r\n        >\r\n          <MDBContainer>\r\n            <MDBRow className=\"justify-content-center\">\r\n              <MDBCol md=\"6\">\r\n                <MDBCard>\r\n                  <MDBCardBody className=\"mx-4 mt-4\">\r\n                    <p className=\"font-small grey-text d-flex justify-content-center\">\r\n                      Enter a new password for the user\r\n                      <p className=\"dark-grey-text font-weight-bold ml-1\">\r\n                        {this.props.username}\r\n                      </p>\r\n                      .\r\n                    </p>\r\n                    <MDBInput\r\n                      value={this.state.password}\r\n                      name=\"password\"\r\n                      onChange={this.changeHandler}\r\n                      type=\"password\"\r\n                      id=\"materialFormRegisterPasswordEx3\"\r\n                      label=\"New password\"\r\n                      required\r\n                    >\r\n                      <div className=\"invalid-feedback\">\r\n                        Please enter a valid password.\r\n                      </div>\r\n                      <div className=\"valid-feedback\">Looks good!</div>\r\n                    </MDBInput>\r\n                    <MDBInput\r\n                      value={this.state.confirmPassword}\r\n                      name=\"confirmPassword\"\r\n                      onChange={this.changeHandler}\r\n                      type=\"password\"\r\n                      id=\"materialFormRegisterPasswordEx4\"\r\n                      label=\"Confirm new password\"\r\n                      required\r\n                    >\r\n                      <div className=\"invalid-feedback\">\r\n                        Please enter a valid password.\r\n                      </div>\r\n                      <div className=\"valid-feedback\">Looks good!</div>\r\n                    </MDBInput>\r\n                    {(this.state.password === \"\" &&\r\n                      this.state.confirmPassword === \"\") ||\r\n                    this.validPassword() ? (\r\n                      <></>\r\n                    ) : (\r\n                      <small className=\"text-danger\">\r\n                        The passwords entered do not match.\r\n                      </small>\r\n                    )}\r\n                    <div className=\"text-center mb-4 mt-5\">\r\n                      <MDBBtn\r\n                        color=\"light-green\"\r\n                        type=\"submit\"\r\n                        className=\"btn-block z-depth-2 btn-primary\"\r\n                      >\r\n                        Change password\r\n                      </MDBBtn>\r\n                    </div>\r\n                  </MDBCardBody>\r\n                </MDBCard>\r\n              </MDBCol>\r\n            </MDBRow>\r\n          </MDBContainer>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default PasswordChangeForm;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React, { useState } from \"react\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n  MDBContainer,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBCard,\r\n  MDBCardBody,\r\n  MDBBtn,\r\n} from \"mdbreact\";\r\n//#endregion\r\n\r\n//#region > Components\r\nconst ServiceGroup = (props: {\r\n  entries: { title: string; [key: string]: any }[];\r\n  onSubmit: (index: number) => void;\r\n}) => {\r\n  // Declare a new state variable, which we'll call \"count\"\r\n  const [activeItemIndex, setActiveItemIndex] = useState(0);\r\n\r\n  return (\r\n    <MDBContainer>\r\n      <MDBRow className=\"justify-content-center\">\r\n        <MDBCol md=\"6\">\r\n          <MDBCard>\r\n            <MDBCardBody className=\"mx-4 mt-4\">\r\n              <MDBListGroup>\r\n                {props.entries.map((e, index) => {\r\n                  return (\r\n                    <MDBListGroupItem\r\n                      key={index}\r\n                      active={index === activeItemIndex}\r\n                      hover={index !== activeItemIndex}\r\n                      onClick={() => setActiveItemIndex(index)}\r\n                    >\r\n                      {e.title}\r\n                    </MDBListGroupItem>\r\n                  );\r\n                })}\r\n              </MDBListGroup>\r\n              <div className=\"text-center mb-4 mt-5\">\r\n                <MDBBtn\r\n                  color=\"light-green\"\r\n                  type=\"button\"\r\n                  className=\"btn-block z-depth-2 btn-primary\"\r\n                  onClick={() => props.onSubmit(activeItemIndex)}\r\n                >\r\n                  Next\r\n                </MDBBtn>\r\n              </div>\r\n            </MDBCardBody>\r\n          </MDBCard>\r\n        </MDBCol>\r\n      </MDBRow>\r\n    </MDBContainer>\r\n  );\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default ServiceGroup;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBBtn,\r\n  MDBInput,\r\n  MDBIcon,\r\n  MDBDropdown,\r\n  MDBDropdownMenu,\r\n  MDBDropdownToggle,\r\n  MDBDropdownItem,\r\n  MDBBtnGroup,\r\n} from \"mdbreact\";\r\n//> Data Table\r\nimport DataTable from \"react-data-table-component\";\r\n\r\n//> Store Types\r\nimport { PAC } from \"../../../../store/types\";\r\n//#endregion\r\n\r\n//#region > Components\r\nclass ProjectTable extends React.Component<\r\n  {\r\n    entries: PAC[];\r\n    modify?: boolean;\r\n    onClick: (index: string) => void;\r\n    onDeleteClick: (index: string) => void;\r\n    onEditClick: (index: string) => void;\r\n  },\r\n  {}\r\n> {\r\n  generateRows = () => {\r\n    return this.props.entries.map((e) => {\r\n      const { id, title, description } = e;\r\n\r\n      return {\r\n        id,\r\n        name: title,\r\n        description,\r\n      };\r\n    });\r\n  };\r\n\r\n  state = {\r\n    columns: [\r\n      {\r\n        name: \"Name\",\r\n        selector: \"name\",\r\n        sortable: true,\r\n        grow: 0.2,\r\n      },\r\n      {\r\n        name: \"Description\",\r\n        selector: \"description\",\r\n      },\r\n      {\r\n        name: undefined,\r\n        cell: (e: any) => (\r\n          <MDBBtnGroup hidden={this.props.modify ? false : true}>\r\n            <MDBDropdown>\r\n              <MDBDropdownToggle color=\"white\">\r\n                <MDBIcon icon=\"ellipsis-v\" />\r\n              </MDBDropdownToggle>\r\n              <MDBDropdownMenu color=\"special\">\r\n                <MDBDropdownItem onClick={() => this.props.onEditClick(e.id)}>\r\n                  {\"Edit\"}\r\n                </MDBDropdownItem>\r\n                <MDBDropdownItem divider />\r\n                <MDBDropdownItem onClick={() => this.props.onDeleteClick(e.id)}>\r\n                  <MDBIcon\r\n                    className=\"red-text pr-3\"\r\n                    icon=\"trash\"\r\n                    color=\"danger\"\r\n                  />\r\n                  {\" Delete\"}\r\n                </MDBDropdownItem>\r\n              </MDBDropdownMenu>\r\n            </MDBDropdown>\r\n          </MDBBtnGroup>\r\n        ),\r\n        allowOverflow: true,\r\n        button: true,\r\n        width: \"120px\", // custom width for icon button\r\n      },\r\n    ],\r\n  };\r\n\r\n  componentDidUpdate(prevProps: any, prevState: any) {\r\n    if (prevProps !== this.props) {\r\n      this.setState({ rows: this.generateRows() });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DataTable\r\n        noHeader\r\n        columns={this.state.columns}\r\n        data={this.generateRows()}\r\n        selectableRows\r\n        onRowClicked={(e) => this.props.onClick(e.id)}\r\n        highlightOnHover\r\n        defaultSortField=\"name\"\r\n        overflowY\r\n        pagination\r\n      />\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default ProjectTable;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBIcon,\r\n  MDBDropdown,\r\n  MDBDropdownMenu,\r\n  MDBDropdownToggle,\r\n  MDBDropdownItem,\r\n  MDBBtnGroup,\r\n  MDBBadge,\r\n  MDBContainer,\r\n} from \"mdbreact\";\r\n//> Data Table\r\nimport DataTable from \"react-data-table-component\";\r\n//> Audio Player\r\nimport ReactPlayer from \"react-player\";\r\n//> Moment\r\nimport moment from \"moment\";\r\n\r\n//> Store Types\r\nimport { Track } from \"../../../../store/types\";\r\n//#endregion\r\n\r\n//#region > Compnents\r\nclass TrackTable extends React.Component<\r\n  {\r\n    entries: Track[];\r\n    modify?: boolean;\r\n    onTranscriptClick: (track: Track) => void;\r\n    onDeleteClick: (track: Track) => void;\r\n    onEditClick: (track: Track) => void;\r\n  },\r\n  {}\r\n> {\r\n  generateRows = () => {\r\n    return this.props.entries.map((e) => {\r\n      const {\r\n        id,\r\n        title,\r\n        description,\r\n        createdAt,\r\n        tags,\r\n        attendees,\r\n        transcript,\r\n        audioFileUrl,\r\n      } = e;\r\n\r\n      return {\r\n        id,\r\n        title,\r\n        description,\r\n        createdAt,\r\n        tags,\r\n        attendees,\r\n        transcript,\r\n        audioFileUrl,\r\n      };\r\n    });\r\n  };\r\n\r\n  state = {\r\n    columns: [\r\n      {\r\n        name: \"Name\",\r\n        selector: \"title\",\r\n        sortable: true,\r\n        grow: 0.5,\r\n      },\r\n      {\r\n        name: \"Created date\",\r\n        selector: \"createdAt\",\r\n        sortable: true,\r\n        grow: 0.5,\r\n        cell: (e: any) => {\r\n          return <span>{moment(e.createdAt).calendar()}</span>;\r\n        },\r\n      },\r\n      {\r\n        name: \"Tags\",\r\n        selector: \"tags\",\r\n        cell: (e: any) => (\r\n          <MDBContainer>\r\n            {e.tags?.map((tag: any) => (\r\n              <MDBBadge\r\n                pill\r\n                color={\r\n                  tag.significance ? tag.significance.toLowerCase() : \"light\"\r\n                }\r\n                className=\"m-1 shadow-none\"\r\n              >\r\n                <p className=\"mx-2 my-2\">{tag.name}</p>\r\n              </MDBBadge>\r\n            ))}\r\n          </MDBContainer>\r\n        ),\r\n      },\r\n      {\r\n        name: \"Attendees\",\r\n        selector: \"attendees\",\r\n        cell: (e: any) => (\r\n          <MDBContainer>\r\n            {e.attendees?.map((attendee: any) => (\r\n              <MDBBadge pill color={\"light\"} className=\"m-1 shadow-none\">\r\n                <p className=\"mx-2 my-2\">{attendee.name}</p>\r\n              </MDBBadge>\r\n            ))}\r\n          </MDBContainer>\r\n        ),\r\n      },\r\n      {\r\n        name: \"Audio\",\r\n        selector: \"audio\",\r\n        cell: (e: any) => (\r\n          <ReactPlayer\r\n            url={e.audioFileUrl}\r\n            height=\"50px\"\r\n            playing={false}\r\n            controls={true}\r\n          />\r\n        ),\r\n      },\r\n      {\r\n        name: undefined,\r\n        cell: (e: any) => (\r\n          <MDBBtnGroup>\r\n            <MDBDropdown>\r\n              <MDBDropdownToggle color=\"white\">\r\n                <MDBIcon icon=\"ellipsis-v\" />\r\n              </MDBDropdownToggle>\r\n              <MDBDropdownMenu color=\"special\">\r\n                <MDBDropdownItem disabled>Play</MDBDropdownItem>\r\n                <MDBDropdownItem\r\n                  onClick={() => this.props.onTranscriptClick(e)}\r\n                >\r\n                  {\"Show transcript\"}\r\n                </MDBDropdownItem>\r\n                <MDBDropdownItem\r\n                  hidden={this.props.modify ? false : true}\r\n                  onClick={() => this.props.onEditClick(e)}\r\n                >\r\n                  {\"Edit\"}\r\n                </MDBDropdownItem>\r\n                <MDBDropdownItem href={e.audioFileUrl} download>\r\n                  Download\r\n                </MDBDropdownItem>\r\n                <MDBDropdownItem\r\n                  divider\r\n                  hidden={this.props.modify ? false : true}\r\n                />\r\n                <MDBDropdownItem\r\n                  hidden={this.props.modify ? false : true}\r\n                  onClick={() => this.props.onDeleteClick(e)}\r\n                >\r\n                  <MDBIcon\r\n                    className=\"red-text pr-3\"\r\n                    icon=\"trash\"\r\n                    color=\"danger\"\r\n                  />\r\n                  {\" Delete\"}\r\n                </MDBDropdownItem>\r\n              </MDBDropdownMenu>\r\n            </MDBDropdown>\r\n          </MDBBtnGroup>\r\n        ),\r\n        allowOverflow: true,\r\n        button: true,\r\n        width: \"120px\", // custom width for icon button\r\n      },\r\n    ],\r\n  };\r\n\r\n  componentDidUpdate(prevProps: any, prevState: any) {\r\n    if (prevProps !== this.props) {\r\n      this.setState({ rows: this.generateRows() });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DataTable\r\n        noHeader\r\n        columns={this.state.columns}\r\n        data={this.generateRows()}\r\n        highlightOnHover\r\n        defaultSortField=\"name\"\r\n        overflowY\r\n        pagination\r\n      />\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default TrackTable;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBIcon,\r\n  MDBDropdown,\r\n  MDBDropdownMenu,\r\n  MDBDropdownToggle,\r\n  MDBDropdownItem,\r\n  MDBBtnGroup,\r\n} from \"mdbreact\";\r\n//> Data Table\r\nimport DataTable from \"react-data-table-component\";\r\n\r\n//> Store Types\r\nimport { Member } from \"../../../../store/types\";\r\n//#endregion\r\n\r\n//#region > Components\r\nclass MemberTable extends React.Component<\r\n  {\r\n    entries?: Member[];\r\n    onDeleteClick: (index: string) => void;\r\n    onEditClick: (index: string) => void;\r\n  },\r\n  {}\r\n> {\r\n  generateRows = () => {\r\n    return (this.props.entries || []).map((e) => {\r\n      const { id, username, isOhrwurmSupervisor } = e;\r\n\r\n      return {\r\n        id,\r\n        username,\r\n        isOhrwurmSupervisor,\r\n      };\r\n    });\r\n  };\r\n\r\n  state = {\r\n    columns: [\r\n      {\r\n        name: \"Username\",\r\n        selector: \"username\",\r\n        sortable: true,\r\n        grow: 0.2,\r\n      },\r\n      {\r\n        name: \"Supervisor\",\r\n        cell: (e: any) => e.isOhrwurmSupervisor && <MDBIcon icon=\"check\" />,\r\n      },\r\n      {\r\n        name: undefined,\r\n        cell: (e: any) => (\r\n          <MDBBtnGroup>\r\n            <MDBDropdown>\r\n              <MDBDropdownToggle color=\"white\">\r\n                <MDBIcon icon=\"ellipsis-v\" />\r\n              </MDBDropdownToggle>\r\n              <MDBDropdownMenu color=\"danger\">\r\n                <MDBDropdownItem\r\n                  onClick={() => this.props.onEditClick(e.username)}\r\n                >\r\n                  {\"Edit\"}\r\n                </MDBDropdownItem>\r\n                <MDBDropdownItem divider />\r\n                <MDBDropdownItem\r\n                  onClick={() => this.props.onDeleteClick(e.username)}\r\n                >\r\n                  <MDBIcon\r\n                    className=\"red-text pr-3\"\r\n                    icon=\"trash\"\r\n                    color=\"danger\"\r\n                  />\r\n                  {\" Delete\"}\r\n                </MDBDropdownItem>\r\n              </MDBDropdownMenu>\r\n            </MDBDropdown>\r\n          </MDBBtnGroup>\r\n        ),\r\n        allowOverflow: true,\r\n        button: true,\r\n        width: \"120px\", // custom width for icon button\r\n      },\r\n    ],\r\n  };\r\n\r\n  componentDidUpdate(prevProps: any, prevState: any) {\r\n    if (prevProps !== this.props) {\r\n      this.setState({ rows: this.generateRows() });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DataTable\r\n        noHeader\r\n        columns={this.state.columns}\r\n        data={this.generateRows()}\r\n        highlightOnHover\r\n        defaultSortField=\"name\"\r\n        overflowY\r\n        pagination\r\n      />\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default MemberTable;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React, { FormEvent } from \"react\";\r\n// DOM bindings for React Router\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBModal,\r\n  MDBModalBody,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n} from \"mdbreact\";\r\n//> Redux\r\nimport { connect } from \"react-redux\";\r\n\r\n//> Store Types\r\nimport { RootState } from \"../../../../store/reducers/index\";\r\nimport { OhrwurmState, PAC, Member } from \"../../../../store/types\";\r\n//> Store Actions\r\nimport {\r\n  fetchPACSAction,\r\n  fetchPACTracksAction,\r\n} from \"../../../../store/actions/ohrwurmActions\";\r\n//> Style Sheet\r\nimport \"./projectmodal.scss\";\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface State {\r\n  title?: string;\r\n  description?: string;\r\n  channelId?: string;\r\n  members?: string[];\r\n  searchQuery?: string;\r\n  editing: boolean;\r\n  filteredMembers?: Member[];\r\n}\r\ninterface OwnProps {\r\n  toggle: any;\r\n  selectedProjectIndex?: string;\r\n  addTrack: any;\r\n  updateTrack: any;\r\n}\r\ninterface StateProps {\r\n  ohrwurm: OhrwurmState;\r\n}\r\ninterface DispatchProps {\r\n  // login: (user?: { username: string; password: string }) => void;\r\n  fetchPACS: (searchQuery?: string) => void;\r\n  fetchPACTracks: (pacId: string, searchQuery?: string) => void;\r\n}\r\ninterface Props\r\n  extends OwnProps,\r\n    StateProps,\r\n    DispatchProps,\r\n    RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Components\r\nclass ProjectModal extends React.Component<Props, State> {\r\n  state: State = {\r\n    title: \"\",\r\n    description: \"\",\r\n    channelId: \"\",\r\n    members: [],\r\n    searchQuery: \"\",\r\n    editing: false,\r\n    filteredMembers: [],\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    if (this.props.selectedProjectIndex) {\r\n      const pac = this.props.ohrwurm.pacs?.items?.find(\r\n        (pac) => pac.id === this.props.selectedProjectIndex\r\n      );\r\n\r\n      if (pac) {\r\n        this.setState({\r\n          title: pac?.title || \"\",\r\n          description: pac?.description,\r\n          channelId: pac?.channelId,\r\n          members: pac?.members?.map((member) => {\r\n            return member.username;\r\n          }),\r\n          editing: true,\r\n        });\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      filteredMembers: this.props.ohrwurm.members?.items,\r\n    });\r\n  };\r\n\r\n  setProjectName = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    this.setState({ title: e.currentTarget.value });\r\n  };\r\n\r\n  setChannelId = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    this.setState({ channelId: e.currentTarget.value });\r\n  };\r\n\r\n  setDescription = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    this.setState({ description: e.currentTarget.value });\r\n  };\r\n\r\n  setMembers = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    let { members } = this.state;\r\n    let member = e.currentTarget.value;\r\n\r\n    if ((members || []).includes(member)) {\r\n      members = members?.filter((f) => f !== member);\r\n    } else {\r\n      members?.push(member);\r\n    }\r\n\r\n    this.setState({ members });\r\n  };\r\n\r\n  search = (value: string) => {\r\n    let filteredMembers = this.props.ohrwurm.members?.items || [];\r\n\r\n    if (value !== \"\") {\r\n      filteredMembers = filteredMembers.filter((member) =>\r\n        member.username.toLowerCase().includes(value.toLowerCase())\r\n      );\r\n    }\r\n\r\n    this.setState({ searchQuery: value, filteredMembers });\r\n  };\r\n\r\n  onSubmit = async () => {\r\n    let { title, description, channelId, members } = this.state;\r\n\r\n    if (this.state.editing) {\r\n      const pac = this.props.ohrwurm.pacs?.items?.find(\r\n        (e) => e.id === this.props.selectedProjectIndex\r\n      );\r\n\r\n      if (pac) {\r\n        if (pac.title === title) {\r\n          title = undefined;\r\n        }\r\n        if (pac.description === description) {\r\n          description = undefined;\r\n        }\r\n        if (pac.channelId === channelId) {\r\n          channelId = undefined;\r\n        }\r\n\r\n        await this.props.updateTrack(\r\n          pac.id,\r\n          title,\r\n          description,\r\n          channelId,\r\n          members\r\n        );\r\n      }\r\n    } else {\r\n      await this.props.addTrack(title, description, channelId, members);\r\n    }\r\n\r\n    this.props.toggle();\r\n  };\r\n\r\n  checkChecked = (username: string) => {\r\n    if (this.state.members?.includes(username)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <MDBModal\r\n        isOpen={true}\r\n        toggle={this.props.toggle}\r\n        size=\"lg\"\r\n        id=\"projectmodal\"\r\n      >\r\n        <MDBModalBody>\r\n          <MDBRow>\r\n            <MDBCol>\r\n              <MDBInput\r\n                id=\"input\"\r\n                className=\"input-track\"\r\n                label=\"Project name\"\r\n                group\r\n                type=\"text\"\r\n                validate\r\n                value={this.state.title}\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) =>\r\n                  this.setProjectName(e)\r\n                }\r\n              />\r\n              <MDBInput\r\n                id=\"input\"\r\n                className=\"input-track\"\r\n                label=\"Channel ID\"\r\n                group\r\n                type=\"text\"\r\n                validate\r\n                value={this.state.channelId}\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) =>\r\n                  this.setChannelId(e)\r\n                }\r\n              />\r\n              <MDBInput\r\n                id=\"input\"\r\n                className=\"input-track\"\r\n                label=\"Description\"\r\n                group\r\n                type=\"textarea\"\r\n                validate\r\n                value={this.state.description}\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) =>\r\n                  this.setDescription(e)\r\n                }\r\n              />\r\n\r\n              <label>Member</label>\r\n              <div className=\"rounded mb-0 border border-light\">\r\n                <div className=\"mb-0\">\r\n                  <MDBInput\r\n                    hint=\"Search\"\r\n                    type=\"text\"\r\n                    value={this.state.searchQuery}\r\n                    containerClass=\"active-pink active-pink-2 mt-0 mb-3\"\r\n                    onChange={(e: any) => this.search(e.target.value)}\r\n                  />\r\n                </div>\r\n                <MDBListGroup>\r\n                  {(this.state.filteredMembers || []).map((member, id) => {\r\n                    return (\r\n                      <MDBListGroupItem>\r\n                        <MDBInput\r\n                          type=\"checkbox\"\r\n                          id={id.toString()}\r\n                          label={member.username}\r\n                          value={member.username}\r\n                          checked={this.checkChecked(member.username)}\r\n                          onChange={(e: React.FormEvent<HTMLInputElement>) =>\r\n                            this.setMembers(e)\r\n                          }\r\n                        />\r\n                      </MDBListGroupItem>\r\n                    );\r\n                  })}\r\n                </MDBListGroup>\r\n              </div>\r\n              <div className=\"text-right mb-4 mt-5\">\r\n                <MDBBtn\r\n                  rounded\r\n                  color=\"light-green\"\r\n                  type=\"button\"\r\n                  className=\"z-depth-2 btn-primary\"\r\n                  onClick={() => this.onSubmit()}\r\n                >\r\n                  Save\r\n                </MDBBtn>\r\n              </div>\r\n            </MDBCol>\r\n          </MDBRow>\r\n        </MDBModalBody>\r\n      </MDBModal>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Redux Mapping\r\nconst mapStateToProps = (state: RootState) => ({ ohrwurm: state.ohrwurm });\r\n\r\nconst mapDispatchToProps = {\r\n  fetchPACS: fetchPACSAction,\r\n  fetchPACTracks: fetchPACTracksAction,\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\n/**\r\n * Provides its connected component with the pieces of the data it needs from\r\n * the store, and the functions it can use to dispatch actions to the store.\r\n *\r\n * Got access to the history object’s properties and the closest\r\n * <Route>'s match.\r\n */\r\nexport default withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(ProjectModal)\r\n);\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React, { FormEvent } from \"react\";\r\n// DOM bindings for React Router\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBModal,\r\n  MDBModalBody,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBListGroup,\r\n  MDBListGroupItem,\r\n} from \"mdbreact\";\r\n//> Redux\r\nimport { connect } from \"react-redux\";\r\n\r\n//> Store Types\r\nimport { RootState } from \"../../../../store/reducers/index\";\r\nimport { OhrwurmState } from \"../../../../store/types\";\r\n//> Store Actions\r\nimport { fetchPACSAction } from \"../../../../store/actions/ohrwurmActions\";\r\n//> Style Sheet\r\nimport \"./membermodal.scss\";\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface State {\r\n  searchQuery?: string;\r\n  isOhrwurmSupervisor?: boolean;\r\n  username: string;\r\n  editing: boolean;\r\n  pacs: string[];\r\n}\r\ninterface OwnProps {\r\n  toggle: any;\r\n  addMember: any;\r\n  updateMember: any;\r\n  username: string;\r\n}\r\ninterface StateProps {\r\n  ohrwurm: OhrwurmState;\r\n}\r\ninterface DispatchProps {\r\n  fetchPACS: (searchQuery?: string) => void;\r\n}\r\ninterface Props\r\n  extends OwnProps,\r\n    StateProps,\r\n    DispatchProps,\r\n    RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Components\r\nclass MemberModal extends React.Component<Props, State> {\r\n  state: State = {\r\n    searchQuery: \"\",\r\n    username: \"\",\r\n    isOhrwurmSupervisor: false,\r\n    editing: false,\r\n    pacs: [],\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    this.props.fetchPACS();\r\n\r\n    if (this.props.username) {\r\n      const member = this.props.ohrwurm.members?.items?.find(\r\n        (member) => member.username === this.props.username\r\n      );\r\n\r\n      if (member) {\r\n        this.setState({\r\n          username: member.username,\r\n          isOhrwurmSupervisor: member.isOhrwurmSupervisor,\r\n          editing: true,\r\n          pacs: member.pacs.map((pac) => {\r\n            return pac.id;\r\n          }),\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  setUsername = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    this.setState({ username: e.currentTarget.value });\r\n  };\r\n\r\n  setSupervisor = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    this.setState({ isOhrwurmSupervisor: e.currentTarget.checked });\r\n  };\r\n\r\n  setProjects = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    let { pacs } = this.state;\r\n    let pac = e.currentTarget.value;\r\n\r\n    if ((pacs || []).includes(pac)) {\r\n      pacs = pacs?.filter((f) => f !== pac);\r\n    } else {\r\n      pacs?.push(pac);\r\n    }\r\n\r\n    this.setState({ pacs });\r\n  };\r\n\r\n  search = (value: string) => {\r\n    this.setState({ searchQuery: value });\r\n    this.props.fetchPACS(value);\r\n  };\r\n\r\n  onSubmit = async () => {\r\n    let { username, isOhrwurmSupervisor, pacs } = this.state;\r\n\r\n    if (this.state.editing) {\r\n      await this.props.updateMember(username, pacs, isOhrwurmSupervisor);\r\n    } else {\r\n      await this.props.addMember(username, pacs, isOhrwurmSupervisor);\r\n\r\n      alert(\r\n        `Generated password for user ${username}: <${this.props.ohrwurm.members?.added?.generatedPassword}>`\r\n      );\r\n    }\r\n\r\n    this.props.toggle();\r\n  };\r\n\r\n  checkChecked = (id: string) => {\r\n    if (this.state.pacs?.includes(id)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <MDBModal\r\n        isOpen={true}\r\n        toggle={this.props.toggle}\r\n        size=\"lg\"\r\n        id=\"membermodal\"\r\n      >\r\n        <MDBModalBody>\r\n          <MDBRow>\r\n            <MDBCol>\r\n              <MDBInput\r\n                id=\"input\"\r\n                className=\"input-track\"\r\n                label=\"Username\"\r\n                group\r\n                type=\"text\"\r\n                validate\r\n                disabled={this.state.editing}\r\n                value={this.state.username}\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) =>\r\n                  this.setUsername(e)\r\n                }\r\n              />\r\n              <MDBInput\r\n                label=\"Supervisor\"\r\n                type=\"checkbox\"\r\n                id=\"checkbox1\"\r\n                checked={this.state.isOhrwurmSupervisor}\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) =>\r\n                  this.setSupervisor(e)\r\n                }\r\n              />\r\n              <br />\r\n              <label>Projects</label>\r\n              <div className=\"rounded mb-0 border border-light\">\r\n                <div className=\"mb-0\">\r\n                  <MDBInput\r\n                    hint=\"Search\"\r\n                    type=\"text\"\r\n                    value={this.state.searchQuery}\r\n                    containerClass=\"active-pink active-pink-2 mt-0 mb-3\"\r\n                    onChange={(e: any) => this.search(e.target.value)}\r\n                  />\r\n                </div>\r\n                <MDBListGroup>\r\n                  {(this.props.ohrwurm?.pacs?.items || []).map((pac, id) => {\r\n                    return (\r\n                      <MDBListGroupItem>\r\n                        <MDBInput\r\n                          type=\"checkbox\"\r\n                          id={id.toString()}\r\n                          label={pac.title}\r\n                          value={pac.id}\r\n                          checked={this.checkChecked(pac.id)}\r\n                          onChange={(e: React.FormEvent<HTMLInputElement>) =>\r\n                            this.setProjects(e)\r\n                          }\r\n                        />\r\n                      </MDBListGroupItem>\r\n                    );\r\n                  })}\r\n                </MDBListGroup>\r\n              </div>\r\n              <div className=\"text-right mb-4 mt-5\">\r\n                <MDBBtn\r\n                  rounded\r\n                  color=\"light-green\"\r\n                  type=\"button\"\r\n                  className=\"z-depth-2 btn-primary\"\r\n                  onClick={() => this.onSubmit()}\r\n                >\r\n                  Save\r\n                </MDBBtn>\r\n              </div>\r\n            </MDBCol>\r\n          </MDBRow>\r\n        </MDBModalBody>\r\n      </MDBModal>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Redux Mapping\r\nconst mapStateToProps = (state: RootState) => ({ ohrwurm: state.ohrwurm });\r\n\r\nconst mapDispatchToProps = {\r\n  fetchPACS: fetchPACSAction,\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\n/**\r\n * Provides its connected component with the pieces of the data it needs from\r\n * the store, and the functions it can use to dispatch actions to the store.\r\n *\r\n * Got access to the history object’s properties and the closest\r\n * <Route>'s match.\r\n */\r\nexport default withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(MemberModal)\r\n);\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React, { FormEvent } from \"react\";\r\n// DOM bindings for React Router\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBModal,\r\n  MDBModalBody,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBInput,\r\n  MDBBtn,\r\n  MDBIcon,\r\n  MDBProgress,\r\n} from \"mdbreact\";\r\n//> Redux\r\nimport { connect } from \"react-redux\";\r\n// Contains the functionality for uploading a file\r\nimport Dropzone from \"react-dropzone\";\r\n// Contains functionality to display time\r\nimport moment from \"moment\";\r\n// Contains the functionality for tag inputs\r\nimport ReactTagInput from \"@snek-shipyard/react-tag-input\";\r\n\r\n//> Store Types\r\nimport { RootState } from \"../../../../store/reducers/index\";\r\nimport {\r\n  OhrwurmState,\r\n  Track,\r\n  TagType,\r\n  Significance,\r\n} from \"../../../../store/types\";\r\n//> Store Actions\r\nimport {\r\n  fetchPACSAction,\r\n  fetchPACTracksAction,\r\n} from \"../../../../store/actions/ohrwurmActions\";\r\n//> Style Sheet\r\nimport \"./trackmodal.scss\";\r\n//#endregion\r\n\r\n//#region > Types\r\ntype Tags = TagType[];\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface State {\r\n  loading: boolean;\r\n  error: Array<any>;\r\n  attendees?: Tags;\r\n  tags?: Tags;\r\n  title?: string;\r\n  description?: string;\r\n  createdAt?: Date;\r\n  audioFile?: any;\r\n  audioFileUrl?: string;\r\n  editing: boolean;\r\n}\r\ninterface OwnProps {\r\n  toggle: any;\r\n  track: Track | undefined;\r\n  addTrack: any;\r\n  updateTrack: any;\r\n  audioFile: any;\r\n}\r\ninterface StateProps {\r\n  ohrwurm: OhrwurmState;\r\n}\r\ninterface DispatchProps {\r\n  // login: (user?: { username: string; password: string }) => void;\r\n  fetchPACS: (searchQuery?: string) => void;\r\n  fetchPACTracks: (pacId: string, searchQuery?: string) => void;\r\n}\r\ninterface Props\r\n  extends OwnProps,\r\n    StateProps,\r\n    DispatchProps,\r\n    RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Components\r\nclass TrackModal extends React.Component<Props, State> {\r\n  state: State = {\r\n    loading: false,\r\n    error: [],\r\n    attendees: [],\r\n    tags: [],\r\n    title: \"\",\r\n    description: \"\",\r\n    createdAt: new Date(),\r\n    audioFile: null,\r\n    audioFileUrl: \"\",\r\n    editing: false,\r\n  };\r\n\r\n  componentWillMount = () => {\r\n    if (this.props.track) {\r\n      const {\r\n        tags,\r\n        title,\r\n        createdAt,\r\n        audioFile,\r\n        description,\r\n        attendees,\r\n        audioFileUrl,\r\n      } = this.props.track;\r\n\r\n      this.setState({\r\n        attendees: (attendees || []).map((attendee) => {\r\n          return { name: attendee.name, significance: \"LIGHT\" };\r\n        }),\r\n        tags: (tags || []).map((tag) => {\r\n          return {\r\n            name: tag.name,\r\n            significance: tag.significance.toUpperCase() as Significance,\r\n          };\r\n        }),\r\n        title,\r\n        description,\r\n        createdAt,\r\n        audioFile,\r\n        audioFileUrl,\r\n        editing: true,\r\n      });\r\n    }\r\n\r\n    if (this.props.audioFile) {\r\n      this.setState({\r\n        audioFile: this.props.audioFile,\r\n      });\r\n    }\r\n  };\r\n\r\n  setTrackName = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    this.setState({ title: e.currentTarget.value });\r\n  };\r\n\r\n  setDescription = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    this.setState({ description: e.currentTarget.value });\r\n  };\r\n\r\n  setDate = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    this.setState({ createdAt: new Date(e.currentTarget.value) });\r\n  };\r\n\r\n  onDrop = async (files: any) => {\r\n    let audioFile = files[0];\r\n\r\n    this.setState({ audioFile });\r\n  };\r\n\r\n  onSubmit = async () => {\r\n    this.setState({ loading: true });\r\n\r\n    let {\r\n      title,\r\n      attendees,\r\n      audioFile,\r\n      createdAt,\r\n      description,\r\n      tags,\r\n    } = this.state;\r\n\r\n    let attendeesList: { name: string }[] | undefined = (attendees || []).map(\r\n      (attendee) => {\r\n        return { name: attendee.name };\r\n      }\r\n    );\r\n\r\n    if (this.state.editing) {\r\n      const id = this.props.track?.id;\r\n\r\n      if (title === this.props.track?.title) {\r\n        title = undefined;\r\n      }\r\n\r\n      if (description === this.props.track?.description) {\r\n        description = undefined;\r\n      }\r\n\r\n      if (tags === this.props.track?.tags) {\r\n        tags = undefined;\r\n      }\r\n\r\n      const propsAttendeesList = this.props.track?.attendees?.map(\r\n        (attendee) => {\r\n          return { name: attendee.name };\r\n        }\r\n      );\r\n\r\n      if (\r\n        JSON.stringify(propsAttendeesList) === JSON.stringify(attendeesList)\r\n      ) {\r\n        attendeesList = undefined;\r\n      }\r\n\r\n      await this.props.updateTrack(\r\n        (id || 0)?.toString(),\r\n        title,\r\n        attendeesList,\r\n        description,\r\n        tags\r\n      );\r\n    } else {\r\n      await this.props.addTrack(\r\n        this.props.ohrwurm.tracks?.pacId,\r\n        title,\r\n        attendeesList,\r\n        audioFile,\r\n        createdAt,\r\n        description,\r\n        tags\r\n      );\r\n    }\r\n\r\n    this.setState({\r\n      loading: false,\r\n    });\r\n\r\n    this.props.toggle();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <MDBModal isOpen={true} toggle={this.props.toggle} size=\"lg\">\r\n        <MDBModalBody>\r\n          {this.state.loading && (\r\n            <MDBProgress\r\n              material\r\n              value={100}\r\n              animated\r\n              height=\"25px\"\r\n              color=\"success\"\r\n              className=\"mb-0 pb-0\"\r\n            >\r\n              Uploading file\r\n            </MDBProgress>\r\n          )}\r\n          <MDBRow>\r\n            <MDBCol>\r\n              <MDBInput\r\n                id=\"input\"\r\n                className=\"input-track\"\r\n                label=\"Track name\"\r\n                group\r\n                type=\"text\"\r\n                validate\r\n                value={this.state.title}\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) =>\r\n                  this.setTrackName(e)\r\n                }\r\n              />\r\n              <MDBInput\r\n                id=\"input\"\r\n                className=\"input-track\"\r\n                label=\"Description\"\r\n                group\r\n                type=\"textarea\"\r\n                validate\r\n                value={this.state.description}\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) =>\r\n                  this.setDescription(e)\r\n                }\r\n              />\r\n              <MDBInput\r\n                id=\"input\"\r\n                disabled={this.state.editing}\r\n                className=\"input-track\"\r\n                label=\"Date\"\r\n                group\r\n                type=\"date\"\r\n                validate\r\n                value={moment(this.state.createdAt).format(\"YYYY-MM-DD\")}\r\n                onChange={(e: React.FormEvent<HTMLInputElement>) =>\r\n                  this.setDate(e)\r\n                }\r\n              />\r\n              <Dropzone\r\n                onDrop={this.onDrop}\r\n                accept=\"audio/*\"\r\n                disabled={this.state.editing}\r\n              >\r\n                {({ getRootProps, getInputProps, acceptedFiles }) => (\r\n                  <div {...getRootProps()}>\r\n                    <input {...getInputProps()} />\r\n                    {this.state.error.length > 0 ||\r\n                    this.state.audioFile !== null ? (\r\n                      <div className=\"text-center\">\r\n                        <ul className=\"list-group mt-2\">\r\n                          <li className=\"list-group-item list-group-item-success\">\r\n                            <MDBIcon\r\n                              icon=\"cloud-upload-alt\"\r\n                              className=\"green-text\"\r\n                              size=\"3x\"\r\n                            />\r\n                            <p className=\"lead mt-3 mb-0\">\r\n                              {this.state.audioFile\r\n                                ? this.state.audioFile.name\r\n                                : this.state.audioFileUrl}\r\n                            </p>\r\n                          </li>\r\n                        </ul>\r\n                        {this.state.loading && (\r\n                          <MDBProgress\r\n                            material\r\n                            value={100}\r\n                            animated\r\n                            height=\"25px\"\r\n                            color=\"success\"\r\n                            className=\"mb-0 pb-0\"\r\n                          >\r\n                            Uploading file\r\n                          </MDBProgress>\r\n                        )}\r\n                        <ul className=\"list-group mt-2\">\r\n                          {this.state.error.length > 0 &&\r\n                            this.state.error.map((error, i) => (\r\n                              <li\r\n                                className=\"list-group-item list-group-item-danger\"\r\n                                key={i}\r\n                              >\r\n                                <MDBIcon\r\n                                  icon=\"times\"\r\n                                  className=\"danger-text\"\r\n                                  size=\"6x\"\r\n                                />\r\n                                <p />\r\n                                <h3>{error}</h3>\r\n                              </li>\r\n                            ))}\r\n                        </ul>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"border rounded px-4 pt-4 pb-3 clickable text-center\">\r\n                        <MDBIcon\r\n                          icon=\"cloud-upload-alt\"\r\n                          className=\"green-text\"\r\n                          size=\"3x\"\r\n                        />\r\n                        <p className=\"lead mt-3 mb-0\">\r\n                          Click here or drop a file to upload!\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </Dropzone>\r\n              <br />\r\n              <label>Tags</label>\r\n              <div className=\"tags\">\r\n                <ReactTagInput\r\n                  tags={this.state.tags || []}\r\n                  onChange={(tags: Tags) => this.setState({ tags })}\r\n                  placeholder=\"Type and press enter\"\r\n                  editable={true}\r\n                  readOnly={false}\r\n                />\r\n              </div>\r\n              <br />\r\n              <label>Attendees</label>\r\n              <div className=\"attendees\">\r\n                <ReactTagInput\r\n                  tags={this.state.attendees || []}\r\n                  onChange={(attendees: Tags) => this.setState({ attendees })}\r\n                  placeholder=\"Type and press enter\"\r\n                  editable={true}\r\n                  readOnly={false}\r\n                />\r\n              </div>\r\n              <div className=\"text-center mb-4 mt-5\">\r\n                <MDBBtn\r\n                  color=\"light-green\"\r\n                  type=\"button\"\r\n                  className=\"btn-block z-depth-2 btn-primary\"\r\n                  onClick={() => this.onSubmit()}\r\n                >\r\n                  Save\r\n                </MDBBtn>\r\n              </div>\r\n            </MDBCol>\r\n          </MDBRow>\r\n        </MDBModalBody>\r\n      </MDBModal>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Redux Mapping\r\nconst mapStateToProps = (state: RootState) => ({ ohrwurm: state.ohrwurm });\r\n\r\nconst mapDispatchToProps = {\r\n  fetchPACS: fetchPACSAction,\r\n  fetchPACTracks: fetchPACTracksAction,\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\n/**\r\n * Provides its connected component with the pieces of the data it needs from\r\n * the store, and the functions it can use to dispatch actions to the store.\r\n *\r\n * Got access to the history object’s properties and the closest\r\n * <Route>'s match.\r\n */\r\nexport default withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(TrackModal)\r\n);\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport {\r\n  MDBContainer,\r\n  MDBIcon,\r\n  MDBInput,\r\n  MDBModal,\r\n  MDBModalBody,\r\n  MDBModalFooter,\r\n  MDBModalHeader,\r\n  MDBRow,\r\n  MDBCol,\r\n  MDBBtn,\r\n} from \"mdbreact\";\r\n//> Redux\r\nimport { connect } from \"react-redux\";\r\n// Contains the functionality for uploading a file\r\nimport Dropzone from \"react-dropzone\";\r\n\r\n//> Store Types\r\nimport { RootState } from \"../../../../store/reducers/index\";\r\nimport {\r\n  UserState,\r\n  OhrwurmState,\r\n  Track,\r\n  TagType,\r\n} from \"../../../../store/types\";\r\n//> Store Actions\r\nimport {\r\n  fetchPACSAction,\r\n  fetchPACTracksAction,\r\n  addTrackAction,\r\n  deleteTrackAction,\r\n  updateTrackAction,\r\n  addPACAction,\r\n  deletePACAction,\r\n  updatePACAction,\r\n  fetchMembersAction,\r\n} from \"../../../../store/actions/ohrwurmActions\";\r\n//> Components\r\nimport { Breadcrumbs } from \"../../../atoms\";\r\nimport { ProjectTable, TrackTable } from \"../../../molecules\";\r\nimport { ProjectModal, TrackModal } from \"../../modals\";\r\n//> Style Sheet\r\nimport \"./ohrwurm.scss\";\r\n//#endregion\r\n\r\n//#region > Types\r\ntype TableType = \"PROJECT\" | \"TRACK\";\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface State {\r\n  activeTable: TableType;\r\n  showTranscriptModal: boolean;\r\n  transcriptTitle?: string;\r\n  transcriptText: string;\r\n  searchQuery?: string;\r\n  selectedProjectIndex?: string;\r\n  editingProject: boolean;\r\n  projectModal: boolean;\r\n  trackModal: boolean;\r\n  selectedTrack: Track | undefined;\r\n  error: Array<any>;\r\n  audioFile: any;\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n  user: UserState;\r\n  ohrwurm: OhrwurmState;\r\n}\r\ninterface DispatchProps {\r\n  fetchPACS: (searchQuery?: string) => void;\r\n  fetchPACTracks: (pacId: string, searchQuery?: string) => void;\r\n  fetchMember: () => void;\r\n  addTrack: (\r\n    pacId: string,\r\n    title: string,\r\n    attendees?: { name: string }[],\r\n    audioFile?: File,\r\n    createdAt?: Date,\r\n    description?: string,\r\n    tags?: TagType[]\r\n  ) => void;\r\n  deleteTrack: (id: string) => void;\r\n  updateTrack: (\r\n    id: string,\r\n    title?: string,\r\n    attendees?: { name: string }[],\r\n    description?: string,\r\n    tags?: TagType[]\r\n  ) => void;\r\n  addPAC: (\r\n    title: string,\r\n    description?: string,\r\n    channelId?: string,\r\n    members?: string[]\r\n  ) => void;\r\n  deletePAC: (id: string) => void;\r\n  updatePAC: (\r\n    id: string,\r\n    title?: string,\r\n    description?: string,\r\n    channelId?: string,\r\n    members?: string[]\r\n  ) => void;\r\n}\r\ninterface Props\r\n  extends OwnProps,\r\n    StateProps,\r\n    DispatchProps,\r\n    RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Functions\r\nconst truncate = (input: string) =>\r\n  input.length > 5 ? `${input.substring(0, 25)}...` : input;\r\n//#endregion\r\n\r\n//#region > Components\r\nclass Ohrwurm extends React.Component<Props, State> {\r\n  state: State = {\r\n    activeTable: \"PROJECT\",\r\n    showTranscriptModal: false,\r\n    transcriptTitle: \"\",\r\n    transcriptText: \"\",\r\n    editingProject: false,\r\n    projectModal: false,\r\n    trackModal: false,\r\n    selectedTrack: undefined,\r\n    error: [],\r\n    audioFile: null,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.props.fetchPACS();\r\n    this.props.fetchMember();\r\n  };\r\n\r\n  switchTable = (table: TableType) => {\r\n    this.setState({ activeTable: table });\r\n  };\r\n\r\n  selectProject = (index: string) => {\r\n    if (!this.state.editingProject) {\r\n      this.props.fetchPACTracks(index);\r\n      this.setState({ selectedProjectIndex: index, searchQuery: \"\" });\r\n      this.switchTable(\"TRACK\");\r\n    } else {\r\n      this.setState({ editingProject: false });\r\n    }\r\n  };\r\n\r\n  deleteProject = async (index: string) => {\r\n    this.state.editingProject = true;\r\n\r\n    this.setState({ editingProject: true }, () => {\r\n      this.props.deletePAC(index);\r\n      this.setState({ editingProject: false });\r\n    });\r\n  };\r\n\r\n  editProject = (index: string) => {\r\n    this.setState({ selectedProjectIndex: index });\r\n    this.setState({ editingProject: true });\r\n    this.toggleProjectModal();\r\n  };\r\n\r\n  selectTrack = (track: Track) => {\r\n    this.setState({\r\n      transcriptTitle: track.title,\r\n      transcriptText: track.transcript,\r\n    });\r\n\r\n    this.toggleTranscriptModal();\r\n  };\r\n\r\n  toggleTranscriptModal = () => {\r\n    this.setState({\r\n      showTranscriptModal: !this.state.showTranscriptModal,\r\n    });\r\n  };\r\n\r\n  search = (value: string) => {\r\n    this.setState({ searchQuery: value });\r\n\r\n    if (this.state.activeTable === \"TRACK\" && this.state.selectedProjectIndex) {\r\n      this.props.fetchPACTracks(this.state.selectedProjectIndex, value);\r\n    }\r\n\r\n    if (this.state.activeTable === \"PROJECT\") {\r\n      this.props.fetchPACS(value);\r\n    }\r\n  };\r\n\r\n  toggleProjectModal = async () => {\r\n    this.setState({\r\n      projectModal: !this.state.projectModal,\r\n    });\r\n\r\n    if (this.state.projectModal) {\r\n      this.setState({ selectedProjectIndex: \"\" });\r\n    }\r\n  };\r\n\r\n  toggleTrackModal = () => {\r\n    this.setState({\r\n      trackModal: !this.state.trackModal,\r\n    });\r\n\r\n    if (this.state.trackModal) {\r\n      this.setState({ selectedTrack: undefined, audioFile: null });\r\n    }\r\n  };\r\n\r\n  deleteTrack = async (track: Track) => {\r\n    this.props.deleteTrack(track.id);\r\n  };\r\n\r\n  editTrack = (track: Track) => {\r\n    this.setState({\r\n      selectedTrack: track,\r\n    });\r\n\r\n    this.toggleTrackModal();\r\n  };\r\n\r\n  onDrop = async (files: any) => {\r\n    if (files.length > 0) {\r\n      this.setState({\r\n        audioFile: files[0],\r\n        error: [],\r\n      });\r\n\r\n      this.toggleTrackModal();\r\n    } else {\r\n      this.setState({\r\n        error: [\"Only sound related file uploading is supported!\"],\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.state.activeTable === \"PROJECT\" ? (\r\n          <Breadcrumbs\r\n            crumbs={[\r\n              { name: \"Ohrwurm\", onClick: () => this.props.history.push(\"/\") },\r\n              {\r\n                name: \"Projects\",\r\n                active: true,\r\n              },\r\n            ]}\r\n          ></Breadcrumbs>\r\n        ) : (\r\n          <Breadcrumbs\r\n            crumbs={[\r\n              { name: \"Ohrwurm\", onClick: () => this.props.history.push(\"/\") },\r\n              {\r\n                name: \"Project\",\r\n                onClick: () => this.switchTable(\"PROJECT\"),\r\n              },\r\n              {\r\n                name: \"Track\",\r\n                active: true,\r\n              },\r\n            ]}\r\n          ></Breadcrumbs>\r\n        )}\r\n        <MDBRow>\r\n          <MDBCol size=\"11\">\r\n            <MDBInput\r\n              hint=\"Search\"\r\n              type=\"text\"\r\n              value={this.state.searchQuery}\r\n              containerClass=\"active-pink active-pink-2 mt-0 mb-3\"\r\n              onChange={(e: any) => this.search(e.target.value)}\r\n            />\r\n          </MDBCol>\r\n          <MDBCol size=\"1\">\r\n            {this.state.activeTable === \"PROJECT\" ? (\r\n              <MDBBtn flat onClick={() => this.toggleProjectModal()}>\r\n                <MDBIcon icon=\"plus\" size=\"lg\" className=\"blue-text\" />\r\n              </MDBBtn>\r\n            ) : (\r\n              <MDBBtn flat onClick={() => this.toggleTrackModal()}>\r\n                <MDBIcon icon=\"upload\" size=\"lg\" className=\"blue-text\" />\r\n              </MDBBtn>\r\n            )}\r\n          </MDBCol>\r\n        </MDBRow>\r\n\r\n        <MDBContainer>\r\n          <MDBModal\r\n            isOpen={this.state.showTranscriptModal}\r\n            toggle={this.toggleTranscriptModal}\r\n            fullHeight\r\n            position=\"left\"\r\n          >\r\n            <MDBModalHeader toggle={this.toggleTranscriptModal}>\r\n              <div className=\"row\">\r\n                <span className=\"dark-grey-text font-medium ml-3\">\r\n                  {truncate(this.state.transcriptTitle || \"\")}\r\n                </span>\r\n              </div>\r\n              <a className=\"dark-grey-text font-small font-weight-bold ml-1\">\r\n                Transcript\r\n              </a>\r\n            </MDBModalHeader>\r\n            <MDBModalBody className=\"modal-body\">\r\n              {this.state.transcriptText}\r\n            </MDBModalBody>\r\n            <MDBModalFooter>\r\n              <MDBIcon icon=\"snowman\" />\r\n            </MDBModalFooter>\r\n          </MDBModal>\r\n        </MDBContainer>\r\n        {this.state.activeTable === \"PROJECT\" ? (\r\n          <ProjectTable\r\n            modify={this.props.user.isOhrwurmSupervisor}\r\n            entries={\r\n              this.props.ohrwurm.pacs?.items\r\n                ? this.props.ohrwurm.pacs.items\r\n                : []\r\n            }\r\n            onClick={this.selectProject}\r\n            onDeleteClick={this.deleteProject}\r\n            onEditClick={this.editProject}\r\n          ></ProjectTable>\r\n        ) : (\r\n          <>\r\n            <ul className=\"list-group mt-2\">\r\n              {this.state.error.length > 0 &&\r\n                this.state.error.map((error, i) => (\r\n                  <li\r\n                    className=\"list-group-item list-group-item-danger\"\r\n                    key={i}\r\n                  >\r\n                    <h3>{error}</h3>\r\n                  </li>\r\n                ))}\r\n            </ul>\r\n            <Dropzone\r\n              onDrop={this.onDrop}\r\n              accept=\"audio/*\"\r\n              noClick\r\n              multiple={false}\r\n            >\r\n              {({ getRootProps, getInputProps, acceptedFiles }) => (\r\n                <div {...getRootProps()}>\r\n                  <input {...getInputProps()} />\r\n                  <TrackTable\r\n                    modify={this.props.user.isOhrwurmSupervisor}\r\n                    entries={\r\n                      this.props.ohrwurm.tracks?.items\r\n                        ? this.props.ohrwurm.tracks.items\r\n                        : []\r\n                    }\r\n                    onTranscriptClick={this.selectTrack}\r\n                    onDeleteClick={this.deleteTrack}\r\n                    onEditClick={this.editTrack}\r\n                  ></TrackTable>\r\n                </div>\r\n              )}\r\n            </Dropzone>\r\n          </>\r\n        )}\r\n        {this.state.projectModal && (\r\n          <ProjectModal\r\n            toggle={this.toggleProjectModal}\r\n            selectedProjectIndex={this.state.selectedProjectIndex}\r\n            addTrack={this.props.addPAC}\r\n            updateTrack={this.props.updatePAC}\r\n          />\r\n        )}\r\n        {this.state.trackModal && (\r\n          <TrackModal\r\n            audioFile={this.state.audioFile}\r\n            toggle={this.toggleTrackModal}\r\n            track={this.state.selectedTrack}\r\n            addTrack={this.props.addTrack}\r\n            updateTrack={this.props.updateTrack}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Redux Mapping\r\nconst mapStateToProps = (state: RootState) => ({\r\n  user: state.user,\r\n  ohrwurm: state.ohrwurm,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  fetchPACS: fetchPACSAction,\r\n  fetchPACTracks: fetchPACTracksAction,\r\n  addTrack: addTrackAction,\r\n  deleteTrack: deleteTrackAction,\r\n  updateTrack: updateTrackAction,\r\n  addPAC: addPACAction,\r\n  deletePAC: deletePACAction,\r\n  updatePAC: updatePACAction,\r\n  fetchMember: fetchMembersAction,\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\n/**\r\n * Provides its connected component with the pieces of the data it needs from\r\n * the store, and the functions it can use to dispatch actions to the store.\r\n *\r\n * Got access to the history object’s properties and the closest\r\n * <Route>'s match.\r\n */\r\nexport default withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(Ohrwurm)\r\n);\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//> Redux\r\nimport { connect } from \"react-redux\";\r\n\r\n//> Store Types\r\nimport { UserState } from \"../../../store/types\";\r\nimport { RootState } from \"../../../store/reducers/index\";\r\n//> Components\r\nimport { Ohrwurm } from \"../../organisms\";\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface State {}\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n  user: UserState;\r\n}\r\ninterface DispatchProps {}\r\ninterface Props\r\n  extends OwnProps,\r\n    StateProps,\r\n    DispatchProps,\r\n    RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Components\r\n/** @class This component displays the landing page including login and register */\r\nclass OhrwurmPage extends React.Component<Props, State> {\r\n  render() {\r\n    if (this.props.user.passwordChanged === false) {\r\n      this.props.history.push(\"/change-password\");\r\n    }\r\n\r\n    if (this.props.user.anonymous === true) {\r\n      this.props.history.push(\"/login\");\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {this.props.user.anonymous === false && (\r\n          <>\r\n            <div id=\"base\" className=\"mt-1\">\r\n              <div className=\"ml-5 mr-5\">\r\n                <Ohrwurm></Ohrwurm>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Redux Mapping\r\nconst mapStateToProps = (state: RootState) => ({ user: state.user });\r\n\r\nconst mapDispatchToProps = {};\r\n//#endregion\r\n\r\n//#region > Exports\r\n/**\r\n * Provides its connected component with the pieces of the data it needs from\r\n * the store, and the functions it can use to dispatch actions to the store.\r\n *\r\n * Got access to the history object’s properties and the closest\r\n * <Route>'s match.\r\n */\r\nexport default withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(OhrwurmPage)\r\n);\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//> Redux\r\nimport { connect } from \"react-redux\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBCol, MDBRow, MDBInput, MDBBtn, MDBIcon } from \"mdbreact\";\r\n\r\n//> Store Types\r\nimport { RootState } from \"../../../../store/reducers/index\";\r\nimport { UserState, OhrwurmState } from \"../../../../store/types\";\r\n//> Store Actions\r\nimport { loginAction } from \"../../../../store/actions/userActions\";\r\nimport {\r\n  addMemberAction,\r\n  deleteMemberAction,\r\n  fetchMembersAction,\r\n  updateMemberAction,\r\n} from \"../../../../store/actions/ohrwurmActions\";\r\n//> Components\r\nimport { Breadcrumbs } from \"../../../atoms\";\r\nimport { MemberTable } from \"../../../molecules\";\r\nimport { MemberModal } from \"../../../organisms/modals\";\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface State {\r\n  searchQuery: string;\r\n  memberModal: boolean;\r\n  username: string;\r\n  editing: boolean;\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n  user: UserState;\r\n  ohrwurm: OhrwurmState;\r\n}\r\ninterface DispatchProps {\r\n  fetchMembers: () => void;\r\n  addMember: (\r\n    username: string,\r\n    pacs?: string[],\r\n    isOhrwurmSupervisor?: boolean\r\n  ) => void;\r\n  deleteMember: (username: string) => void;\r\n  updateMember: (\r\n    username: string,\r\n    pacs?: string[],\r\n    isOhrwurmSupervisor?: boolean\r\n  ) => void;\r\n}\r\ninterface Props\r\n  extends OwnProps,\r\n    StateProps,\r\n    DispatchProps,\r\n    RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Components\r\n/** @class This component displays the login page */\r\nclass MemberPage extends React.Component<Props, State> {\r\n  state: State = {\r\n    searchQuery: \"\",\r\n    memberModal: false,\r\n    username: \"\",\r\n    editing: false,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.props.fetchMembers();\r\n  };\r\n\r\n  deleteUser = async (username: string) => {\r\n    this.props.deleteMember(username);\r\n  };\r\n\r\n  editUser = (username: string) => {\r\n    this.setState({ username });\r\n    this.toggleMemberModal();\r\n  };\r\n\r\n  search = (value: string) => {\r\n    this.setState({ searchQuery: value });\r\n  };\r\n\r\n  toggleMemberModal = () => {\r\n    this.setState({\r\n      memberModal: !this.state.memberModal,\r\n    });\r\n\r\n    if (this.state.memberModal) {\r\n      this.setState({ username: \"\" });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <div id=\"base\" className=\"mt-1\">\r\n          <div className=\"ml-5 mr-5\">\r\n            <Breadcrumbs\r\n              crumbs={[\r\n                {\r\n                  name: \"Ohrwurm\",\r\n                  onClick: () => this.props.history.push(\"/\"),\r\n                },\r\n                {\r\n                  name: \"Members management\",\r\n                  active: true,\r\n                },\r\n              ]}\r\n            ></Breadcrumbs>\r\n            <MDBRow>\r\n              <MDBCol size=\"11\">\r\n                <MDBInput\r\n                  disabled\r\n                  hint=\"Search\"\r\n                  type=\"text\"\r\n                  value={this.state.searchQuery}\r\n                  containerClass=\"active-pink active-pink-2 mt-0 mb-3\"\r\n                  onChange={(e: any) => this.search(e.target.value)}\r\n                />\r\n              </MDBCol>\r\n              <MDBCol size=\"1\">\r\n                <MDBBtn flat onClick={() => this.toggleMemberModal()}>\r\n                  <MDBIcon icon=\"plus\" size=\"lg\" className=\"blue-text\" />\r\n                </MDBBtn>\r\n              </MDBCol>\r\n            </MDBRow>\r\n            <MemberTable\r\n              entries={this.props.ohrwurm.members?.items}\r\n              onDeleteClick={(username: string) => this.deleteUser(username)}\r\n              onEditClick={(username: string) => this.editUser(username)}\r\n            ></MemberTable>\r\n          </div>\r\n        </div>\r\n        {this.state.memberModal && (\r\n          <MemberModal\r\n            toggle={this.toggleMemberModal}\r\n            username={this.state.username}\r\n            addMember={this.props.addMember}\r\n            updateMember={this.props.updateMember}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Redux Mapping\r\nconst mapStateToProps = (state: RootState) => ({\r\n  user: state.user,\r\n  ohrwurm: state.ohrwurm,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  login: loginAction,\r\n  fetchMembers: fetchMembersAction,\r\n  addMember: addMemberAction,\r\n  deleteMember: deleteMemberAction,\r\n  updateMember: updateMemberAction,\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\n/**\r\n * Provides its connected component with the pieces of the data it needs from\r\n * the store, and the functions it can use to dispatch actions to the store.\r\n *\r\n * Got access to the history object’s properties and the closest\r\n * <Route>'s match.\r\n */\r\nexport default withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(MemberPage)\r\n);\r\n//#endregion\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//> Redux\r\nimport { connect } from \"react-redux\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBContainer } from \"mdbreact\";\r\n\r\n//> Store Types\r\nimport { RootState } from \"../../../store/reducers/index\";\r\nimport { UserState } from \"../../../store/types\";\r\n//> Store Actions\r\nimport { loginAction } from \"../../../store/actions/userActions\";\r\n//> Service Registry\r\nimport Services from \"../../../serviceRegistry.json\";\r\n//> Components\r\nimport { Breadcrumbs } from \"../../atoms\";\r\nimport { LoginForm, ServiceGroup } from \"../../molecules\";\r\n//#endregion\r\n\r\n//#region > Types\r\ntype FormType = \"SERVICE\" | \"AUTH\";\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface State {\r\n  activeForm: FormType;\r\n}\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n  user: UserState;\r\n}\r\ninterface DispatchProps {\r\n  login: (user?: { username: string; password: string }) => void;\r\n}\r\ninterface Props\r\n  extends OwnProps,\r\n    StateProps,\r\n    DispatchProps,\r\n    RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Components\r\n/** @class This component displays the login page */\r\nclass LoginPage extends React.Component<Props, State> {\r\n  state: State = {\r\n    activeForm: \"SERVICE\",\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    if (this.props.user.anonymous === false) {\r\n      this.props.history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n    if (this.props.user.anonymous === false) {\r\n      this.props.history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  switchForm = (form: FormType) => {\r\n    this.setState({ activeForm: form });\r\n  };\r\n\r\n  submitService = (serviceIndex: number) => {\r\n    window.localStorage.setItem(\r\n      \"ohrwurm_service_index\",\r\n      serviceIndex.toString()\r\n    );\r\n\r\n    this.switchForm(\"AUTH\");\r\n  };\r\n\r\n  submitAuth = async (username: string, password: string) => {\r\n    this.props.login({ username, password });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"login\" className=\"m-5\">\r\n        {this.props.user.anonymous === true && (\r\n          <MDBContainer>\r\n            {this.state.activeForm === \"SERVICE\" ? (\r\n              <>\r\n                <Breadcrumbs\r\n                  crumbs={[\r\n                    {\r\n                      name: \"Services\",\r\n                      active: true,\r\n                    },\r\n                  ]}\r\n                ></Breadcrumbs>\r\n                <ServiceGroup\r\n                  entries={Services.ohrwurm}\r\n                  onSubmit={this.submitService}\r\n                ></ServiceGroup>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Breadcrumbs\r\n                  crumbs={[\r\n                    {\r\n                      name: \"Services\",\r\n                      onClick: () => this.switchForm(\"SERVICE\"),\r\n                    },\r\n                    { name: \"Authenticate to Service\", active: true },\r\n                  ]}\r\n                ></Breadcrumbs>\r\n                <LoginForm onSubmit={this.submitAuth}></LoginForm>\r\n              </>\r\n            )}\r\n          </MDBContainer>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Redux Mapping\r\nconst mapStateToProps = (state: RootState) => ({ user: state.user });\r\n\r\nconst mapDispatchToProps = {\r\n  login: loginAction,\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\n/**\r\n * Provides its connected component with the pieces of the data it needs from\r\n * the store, and the functions it can use to dispatch actions to the store.\r\n *\r\n * Got access to the history object’s properties and the closest\r\n * <Route>'s match.\r\n */\r\nexport default withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(LoginPage)\r\n);\r\n//#endregion\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\r\n//> Redux\r\nimport { connect } from \"react-redux\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport { MDBContainer } from \"mdbreact\";\r\n\r\n//> Store Types\r\nimport { RootState } from \"../../../store/reducers/index\";\r\nimport { UserState } from \"../../../store/types\";\r\n//> Store Actions\r\nimport { changePasswordAction } from \"../../../store/actions/userActions\";\r\n//> Components\r\nimport { Breadcrumbs } from \"../../atoms\";\r\nimport { PasswordChangeForm } from \"../../molecules\";\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface State {}\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n  user: UserState;\r\n}\r\ninterface DispatchProps {\r\n  changePassword: (newPassword: string) => void;\r\n}\r\ninterface Props\r\n  extends OwnProps,\r\n    StateProps,\r\n    DispatchProps,\r\n    RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Components\r\n/** @class This component displays the password change page */\r\nclass PasswordChangePage extends React.Component<Props, State> {\r\n  componentDidMount = () => {\r\n    if (this.props.user.anonymous === true) {\r\n      this.props.history.push(\"/login\");\r\n    }\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n    if (\r\n      this.props.user.anonymous === false &&\r\n      this.props.user.passwordChanged === false\r\n    ) {\r\n      this.props.history.push(\"/change-password\");\r\n    }\r\n\r\n    if (this.props.user.anonymous === true) {\r\n      this.props.history.push(\"/login\");\r\n    }\r\n  };\r\n\r\n  submitPasswordChange = async (newPassword: string) => {\r\n    this.props.changePassword(newPassword);\r\n  };\r\n\r\n  render() {\r\n    if (this.props.user.meta?.passwordSuccessfullyChanged) {\r\n      this.props.user.meta.passwordSuccessfullyChanged = false;\r\n      this.props.history.push(\"/\");\r\n    }\r\n\r\n    return (\r\n      <div id=\"change-password\" className=\"m-5\">\r\n        {this.props.user.anonymous === false && (\r\n          <MDBContainer>\r\n            <>\r\n              <Breadcrumbs\r\n                crumbs={[\r\n                  {\r\n                    name: \"Ohrwurm\",\r\n                    // onClick: () => this.switchForm(\"SERVICE\"),\r\n                  },\r\n                  {\r\n                    name: \"Change password\",\r\n                    active: true,\r\n                  },\r\n                ]}\r\n              ></Breadcrumbs>\r\n              <PasswordChangeForm\r\n                username={this.props.user.username}\r\n                onSubmit={this.submitPasswordChange}\r\n              ></PasswordChangeForm>\r\n            </>\r\n          </MDBContainer>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Redux Mapping\r\nconst mapStateToProps = (state: RootState) => ({ user: state.user });\r\n\r\nconst mapDispatchToProps = {\r\n  changePassword: changePasswordAction,\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\n/**\r\n * Provides its connected component with the pieces of the data it needs from\r\n * the store, and the functions it can use to dispatch actions to the store.\r\n *\r\n * Got access to the history object’s properties and the closest\r\n * <Route>'s match.\r\n */\r\nexport default withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(PasswordChangePage)\r\n);\r\n//#endregion\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// DOM bindings for React Router\r\nimport {\r\n  Redirect,\r\n  Route,\r\n  Switch,\r\n  RouteComponentProps,\r\n  withRouter,\r\n} from \"react-router-dom\";\r\n//> Redux\r\n// Allows to React components read data from a Redux store, and dispatch actions\r\n// to the store to update data.\r\nimport { connect } from \"react-redux\";\r\n\r\n//> Components\r\nimport { OhrwurmPage, OhrwurmMemberPage } from \"./components/pages\";\r\nimport LoginPage from \"./components/pages/LoginPage/index\";\r\nimport PasswordChangePage from \"./components/pages/PasswordChangePage/index\";\r\n\r\nimport { RootState } from \"./store/reducers/index\";\r\nimport { UserState } from \"./store/types\";\r\n//#endregion\r\n\r\n//#region > Interfaces\r\ninterface OwnProps {}\r\ninterface StateProps {\r\n  user: UserState;\r\n}\r\ninterface DispatchProps {}\r\ninterface Props\r\n  extends OwnProps,\r\n    StateProps,\r\n    DispatchProps,\r\n    RouteComponentProps {}\r\n//#endregion\r\n\r\n//#region > Components\r\n/** @class Route component which includes all routes to specified components */\r\nclass Routes extends React.Component<Props, {}> {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route exact path=\"/\" component={() => <OhrwurmPage />} />\r\n        <Route exact path=\"/members\" component={() => <OhrwurmMemberPage />} />\r\n        <Route exact path=\"/login\" component={() => <LoginPage />} />\r\n        <Route\r\n          exact\r\n          path=\"/change-password\"\r\n          component={() => <PasswordChangePage />}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n//#endregion\r\n\r\n//#region > Redux Mapping\r\nconst mapStateToProps = (state: RootState) => ({ user: state.user });\r\n\r\nconst mapDispatchToProps = (dispatch: any) => {\r\n  return {};\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\n/**\r\n * Provides its connected component with the pieces of the data it needs from\r\n * the store, and the functions it can use to dispatch actions to the store.\r\n *\r\n * Got access to the history object’s properties and the closest\r\n * <Route>'s match.\r\n */\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Routes));\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React, { useEffect } from \"react\";\r\n// DOM bindings for React Router\r\nimport { withRouter } from \"react-router-dom\";\r\n//> Redux\r\n// Allows to React components read data from a Redux store, and dispatch actions\r\n// to the store to update data.\r\nimport { useDispatch } from \"react-redux\";\r\n\r\n//> Components\r\n// Starts the page on top when reloaded or redirected\r\nimport { Navbar } from \"./components/organisms\";\r\n//> Store Actions\r\nimport { loginAction } from \"./store/actions/userActions\";\r\n//> Stylesheet\r\nimport \"./App.css\";\r\n//> Routes\r\nimport Routes from \"./Routes\";\r\n//#endregion\r\n\r\n//#region > Components\r\n/**\r\n * @class Root component which loads all other components\r\n */\r\nconst App = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(loginAction());\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div className=\"flyout\">\r\n        <main>\r\n          <Routes />\r\n        </main>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default withRouter(App);\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> Action Types\r\nimport { UserState, LoginAction } from \"../types\";\r\n//#endregion\r\n\r\n//#region > Constant Variables\r\nconst INIT_STATE: UserState = {\r\n  anonymous: undefined,\r\n  passwordChanged: undefined,\r\n  username: undefined,\r\n  meta: {\r\n    passwordSuccessfullyChanged: false,\r\n  },\r\n  error: undefined,\r\n  errorDetails: undefined,\r\n};\r\n//#endregion\r\n\r\n//#region > Reducers\r\nconst userReducer = (state = INIT_STATE, action: LoginAction): UserState => {\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    //> Login\r\n    case \"USER_LOGIN_REQUEST\":\r\n      return state;\r\n    case \"USER_LOGIN_SUCCESS\":\r\n      return {\r\n        username: payload?.username,\r\n        isOhrwurmSupervisor: payload?.isOhrwurmSupervisor,\r\n        passwordChanged: payload?.passwordChanged,\r\n        anonymous: payload?.anonymous,\r\n      };\r\n    case \"USER_LOGIN_FAILURE\":\r\n      return {\r\n        ...INIT_STATE,\r\n      };\r\n    //> Logout\r\n    case \"USER_LOGOUT_REQUEST\":\r\n      return state;\r\n    case \"USER_LOGOUT_SUCCESS\":\r\n      return {\r\n        anonymous: true,\r\n        isOhrwurmSupervisor: undefined,\r\n        passwordChanged: undefined,\r\n        username: undefined,\r\n      };\r\n    case \"USER_LOGOUT_FAILURE\":\r\n      return {\r\n        ...INIT_STATE,\r\n        error: payload?.error,\r\n        errorDetails: payload?.errorDetails,\r\n      };\r\n    //> Change password\r\n    case \"USER_CHANGE_PASSWORD_REQUEST\":\r\n      return state;\r\n    case \"USER_CHANGE_PASSWORD_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        passwordChanged: true,\r\n        meta: {\r\n          passwordSuccessfullyChanged: true,\r\n        },\r\n      };\r\n    case \"USER_CHANGE_PASSWORD_FAILURE\":\r\n      return {\r\n        ...state,\r\n        error: payload?.error,\r\n        errorDetails: payload?.errorDetails,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default userReducer;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> Action Types\r\nimport { OhrwurmState, OhrwurmAction } from \"../types\";\r\n//#endregion\r\n\r\n//#region > Constant Variables\r\nconst INIT_STATE: OhrwurmState = {\r\n  pacs: undefined,\r\n  tracks: undefined,\r\n  members: undefined,\r\n  error: undefined,\r\n  errorDetails: undefined,\r\n};\r\n//#endregion\r\n\r\n//#region > Reducers\r\nconst ohrwurmReducer = (\r\n  state = INIT_STATE,\r\n  action: OhrwurmAction\r\n): OhrwurmState => {\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    //> Get PACs\r\n    case \"OHRWURM_FETCH_PACS_REQUEST\":\r\n    case \"OHRWURM_ADD_PAC_REQUEST\":\r\n    case \"OHRWURM_DELETE_PAC_REQUEST\":\r\n    case \"OHRWURM_UPDATE_PAC_REQUEST\":\r\n      return state;\r\n    case \"OHRWURM_FETCH_PACS_SUCCESS\":\r\n    case \"OHRWURM_ADD_PAC_SUCCESS\":\r\n    case \"OHRWURM_DELETE_PAC_SUCCESS\":\r\n    case \"OHRWURM_UPDATE_PAC_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        pacs: payload?.pacs,\r\n      };\r\n    case \"OHRWURM_FETCH_PACS_FAILURE\":\r\n    case \"OHRWURM_ADD_PAC_FAILURE\":\r\n    case \"OHRWURM_DELETE_PAC_FAILURE\":\r\n    case \"OHRWURM_UPDATE_PAC_FAILURE\":\r\n      return {\r\n        ...INIT_STATE,\r\n        error: payload?.error,\r\n        errorDetails: payload?.errorDetails,\r\n      };\r\n    //> Get Tracks\r\n    case \"OHRWURM_FETCH_TRACKS_REQUEST\":\r\n    case \"OHRWURM_ADD_TRACK_REQUEST\":\r\n    case \"OHRWURM_DELETE_TRACK_REQUEST\":\r\n    case \"OHRWURM_UPDATE_TRACK_REQUEST\":\r\n      return state;\r\n    case \"OHRWURM_FETCH_TRACKS_SUCCESS\":\r\n    case \"OHRWURM_ADD_TRACK_SUCCESS\":\r\n    case \"OHRWURM_DELETE_TRACK_SUCCESS\":\r\n    case \"OHRWURM_UPDATE_TRACK_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        tracks: payload?.tracks,\r\n      };\r\n    case \"OHRWURM_FETCH_TRACKS_FAILURE\":\r\n    case \"OHRWURM_ADD_TRACK_FAILURE\":\r\n    case \"OHRWURM_DELETE_TRACK_FAILURE\":\r\n    case \"OHRWURM_UPDATE_TRACK_FAILURE\":\r\n      return {\r\n        ...INIT_STATE,\r\n        error: payload?.error,\r\n        errorDetails: payload?.errorDetails,\r\n      };\r\n    //> Members\r\n    case \"OHRWURM_FETCH_MEMBERS_REQUEST\":\r\n    case \"OHRWURM_ADD_MEMBER_REQUEST\":\r\n    case \"OHRWURM_DELETE_MEMBER_REQUEST\":\r\n    case \"OHRWURM_UPDATE_MEMBER_REQUEST\":\r\n      return state;\r\n    case \"OHRWURM_FETCH_MEMBERS_SUCCESS\":\r\n    case \"OHRWURM_ADD_MEMBER_SUCCESS\":\r\n    case \"OHRWURM_DELETE_MEMBER_SUCCESS\":\r\n    case \"OHRWURM_UPDATE_MEMBER_SUCCESS\":\r\n      return {\r\n        ...state,\r\n        members: payload?.members,\r\n      };\r\n    case \"OHRWURM_FETCH_MEMBERS_FAILURE\":\r\n    case \"OHRWURM_ADD_MEMBER_FAILURE\":\r\n    case \"OHRWURM_DELETE_MEMBER_FAILURE\":\r\n    case \"OHRWURM_UPDATE_MEMBER_FAILURE\":\r\n      return {\r\n        ...INIT_STATE,\r\n        error: payload?.error,\r\n        errorDetails: payload?.errorDetails,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport default ohrwurmReducer;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","//#region > Imports\r\n//> Redux\r\n// Allows to React components read data from a Redux store, and dispatch actions\r\n// to the store to update data.\r\nimport { combineReducers } from \"redux\";\r\n// LoadingBar\r\nimport { loadingBarReducer } from \"react-redux-loading-bar\";\r\n\r\n//> Reducers\r\n// User\r\nimport userReducers from \"./userReducers\";\r\nimport ohrwurmReducer from \"./ohrwurmReducers\";\r\n//#endregion\r\n\r\n//#region > Config\r\nconst rootReducer = combineReducers({\r\n  // Loading bar\r\n  loadingBar: loadingBarReducer,\r\n  // User data\r\n  user: userReducers,\r\n  // Ohrwurm\r\n  ohrwurm: ohrwurmReducer,\r\n});\r\n//#endregion\r\n\r\n//#region > Exports\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport default rootReducer;\r\n//#endregion\r\n\r\n/**\r\n * SPDX-License-Identifier: (EUPL-1.2)\r\n * Copyright © 2020-2021 Nico Schett\r\n */\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","//#region > Imports\r\n//> React\r\n// Contains all the functionality necessary to define React components\r\nimport React from \"react\";\r\n// This serves as an entry point to the DOM and server renderers for React\r\nimport ReactDOM from \"react-dom\";\r\n// DOM bindings for React Router\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\n// Provider\r\nimport { Provider } from \"react-redux\";\r\n//> Redux\r\n// Allows to React components read data from a Redux store, and dispatch actions\r\n// to the store to update data.\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\n// Allows to manually display a LoadingBar\r\nimport { loadingBarMiddleware } from \"react-redux-loading-bar\";\r\n// Thunk\r\nimport thunk from \"redux-thunk\";\r\n//> Client\r\nimport { SnekClient } from \"snek-client\";\r\n\r\n//> Font Awesome\r\n// Font Awesome is an awesome icon library\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\n//> Bootstrap\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\n//> MDB\r\n// \"Material Design for Bootstrap\" is a great UI design framework\r\nimport \"mdbreact/dist/css/mdb.css\";\r\n\r\n//> Services\r\nimport Services from \"./serviceRegistry.json\";\r\n//> Style sheet\r\n// Root SCSS file\r\nimport \"./index.scss\";\r\n//> Components\r\n// Root component\r\nimport App from \"./App\";\r\n//> Root Reducer\r\nimport rootReducer from \"./store/reducers\";\r\n//> Service Worker\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n//#endregion\r\n\r\n//#region > Redux Store Initialization\r\nlet serviceIndex = window.localStorage.getItem(\"ohrwurm_service_index\");\r\n\r\nconst SERVICE_INDEX = serviceIndex ? parseInt(serviceIndex) : 0;\r\nconst getClientSnek = () => new SnekClient(Services.ohrwurm[SERVICE_INDEX].url);\r\n\r\nconst composeEnhancers = composeWithDevTools({\r\n  // Specify here name, actionsBlacklist, actionsCreators and other options\r\n});\r\n\r\nconst enhancer = composeEnhancers(\r\n  applyMiddleware(\r\n    loadingBarMiddleware(),\r\n    thunk.withExtraArgument({\r\n      getClientSnek,\r\n    })\r\n  )\r\n  // other store enhancers if any\r\n);\r\n\r\nconst STORE = createStore(rootReducer /* preloadedState, */, enhancer);\r\n//#endregion\r\n\r\n//Render the root component to <div id=\"root\"></div>\r\nReactDOM.render(\r\n  <Provider store={STORE}>\r\n    <React.StrictMode>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </React.StrictMode>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}